import{j as e,m as h,A as F}from"./motion-ehv0MlpY.js";import{h as P,u as B,r as i,L as m}from"./react-vendor-BRpVHgt8.js";import{p as E,P as z,M as y}from"./index-DnveLcks.js";import{p as C,e as I,z as w,X as D,D as L,G as M}from"./icons-Cc-UGH4M.js";import"./supabase-DlXWbh3n.js";const g=c=>{const o=c.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/);return o?o[1]:null},p=c=>{const o=g(c);return o?`https://www.youtube.com/embed/${o}`:c},U=()=>{var b;const{id:c}=P(),o=B(),[t,v]=i.useState(null),[a,n]=i.useState(null),[j,d]=i.useState("");i.useEffect(()=>{window.scrollTo(0,0),(async()=>{const s=await E.getAll(),x=(s&&s.length>0?s:z).find(N=>N.id===c);x?(v(x),document.title=`${x.title} | Jakub Minka`):o("/portfolio")})()},[c,o]),i.useEffect(()=>{if(a===null||!(t!=null&&t.gallery))return;const l=s=>{s.key==="ArrowLeft"?(s.preventDefault(),n(a===0?t.gallery.length-1:a-1)):s.key==="ArrowRight"?(s.preventDefault(),n(a===t.gallery.length-1?0:a+1)):s.key==="Escape"&&n(null)};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a,t]);const k=l=>{switch(l){case y.VIDEO:return"bg-[#FF3B30]";case y.BOTH:return"bg-[#2ECC71]";default:return"bg-[#007BFF]"}},u=i.useMemo(()=>{if(!(t!=null&&t.gallery)||t.gallery.length!==1)return null;const l=t.gallery[0];return l.type==="video"?l:null},[t==null?void 0:t.gallery]),r=i.useMemo(()=>t!=null&&t.gallery&&t.gallery.find(l=>l.type==="video")||null,[t==null?void 0:t.gallery]),f=i.useMemo(()=>!(t!=null&&t.gallery)||t.gallery.length===0?[]:[...t.gallery].map(l=>({...l,weight:Math.random()>.6?2.2:1.5})),[t==null?void 0:t.gallery]);return i.useEffect(()=>{if(!t)return;if(r){d("");return}const l=(t.gallery||[]).filter(s=>s.type==="image");if(l.length>0){const s=l[Math.floor(Math.random()*l.length)];d(s.url)}else d(t.thumbnailUrl||"")},[t==null?void 0:t.id,r]),t?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("header",{className:"relative h-[85vh] flex items-center justify-center overflow-hidden bg-black",children:[e.jsx("div",{className:"absolute inset-0 z-10 bg-gradient-to-t from-black via-black/20 to-transparent"}),r&&r.source!=="youtube"?e.jsx("video",{src:r.url,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover opacity-60",style:{pointerEvents:"none"}}):r&&r.source==="youtube"?e.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",children:[e.jsx("iframe",{src:`${p(r.url)}?autoplay=1&mute=1&loop=1&playlist=${g(r.url)}&controls=0&showinfo=0&modestbranding=1&playsinline=1&fs=0&rel=0&iv_load_policy=3&disablekb=1`,className:"absolute opacity-60",style:{pointerEvents:"none",top:"50%",left:"50%",width:"177.77777778vh",height:"56.25vw",minHeight:"100%",minWidth:"100%",transform:"translate(-50%, -50%)"},allow:"autoplay; encrypted-media"}),e.jsx("div",{className:"absolute inset-0 z-10",style:{pointerEvents:"auto"}})]}):e.jsx(h.img,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:.8},transition:{duration:1.5},src:j||t.thumbnailUrl,className:"absolute inset-0 w-full h-full object-cover"}),e.jsxs("div",{className:"relative z-20 text-center px-6 max-w-7xl w-full",children:[e.jsxs(m,{to:"/portfolio",className:"inline-flex items-center gap-3 text-white/50 hover:text-white transition-all text-[10px] font-black uppercase tracking-[0.4em] mb-12 group",children:[e.jsx(C,{size:16,className:"group-hover:-translate-x-2 transition-transform"})," Zpět do portfolia"]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-8",children:[e.jsx("span",{className:`px-5 py-2 text-[9px] font-black uppercase tracking-[0.2em] text-white ${k(t.type)}`,children:t.type.toUpperCase()}),e.jsx(m,{to:`/portfolio?spec=${t.categoryId}`,className:"bg-white/10 backdrop-blur-md px-5 py-2 text-[9px] font-black uppercase tracking-[0.2em] border border-white/20 text-white hover:bg-[#007BFF] hover:border-[#007BFF] transition-all",children:t.category})]}),e.jsx(h.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-5xl md:text-8xl lg:text-[130px] font-black text-white uppercase tracking-tighter leading-[0.8] mb-12",children:t.title})]})]}),e.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-32 grid grid-cols-1 lg:grid-cols-12 gap-24",children:[e.jsxs("div",{className:"lg:col-span-7 space-y-12",children:[e.jsx("span",{className:"text-[#007BFF] font-black text-[10px] uppercase tracking-[0.6em] block",children:"O projektu"}),e.jsx("h2",{className:"text-4xl md:text-7xl font-black tracking-tighter leading-none text-black uppercase",children:t.title}),e.jsx("p",{className:"text-2xl font-black text-gray-950 leading-tight border-l-8 border-[#007BFF] pl-10 py-2",children:t.shortDescription}),e.jsx("div",{className:"prose prose-xl max-w-none text-gray-600 font-medium leading-relaxed whitespace-pre-wrap",children:t.description})]}),e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"bg-blue-50/50 p-12 space-y-8 border border-blue-100 rounded-sm",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-[#007BFF]",children:"Dodané služby"}),e.jsx("div",{className:"space-y-4",children:(b=t.servicesDelivered)==null?void 0:b.split(`
`).map((l,s)=>e.jsxs("div",{className:"flex items-center gap-3 text-black font-bold uppercase text-[10px] tracking-widest",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#007BFF] rounded-full"})," ",l]},s))}),t.websiteUrl&&e.jsx("a",{href:t.websiteUrl,target:"_blank",rel:"noreferrer",className:"block w-full border-2 border-[#007BFF] text-[#007BFF] py-5 text-center text-[10px] font-black uppercase tracking-[0.4em] hover:bg-[#007BFF] hover:text-white transition-all shadow-xl mt-8",children:e.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[e.jsx(I,{size:14})," ",t.websiteLabel||"NAVŠTÍVIT WEB"]})}),e.jsx(m,{to:"/kontakt",className:"block w-full bg-black text-white py-6 text-center text-[11px] font-black uppercase tracking-[0.4em] hover:bg-[#007BFF] transition-all shadow-xl mt-6",children:"POPTAT PODOBNÝ PROJEKT"})]})})]}),u&&e.jsx("section",{className:"max-w-7xl mx-auto px-6 pb-32",children:e.jsx("div",{className:"aspect-video w-full bg-black rounded-sm overflow-hidden shadow-2xl",children:u.source==="youtube"?e.jsx("iframe",{src:p(u.url),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Video"}):e.jsx("video",{src:u.url,controls:!0,className:"w-full h-full",autoPlay:!0})})}),!u&&f.length>0&&e.jsx("section",{className:"bg-white",children:e.jsx("div",{className:"w-full flex flex-wrap bg-white",children:f.map((l,s)=>e.jsx("div",{className:"relative cursor-pointer overflow-hidden group bg-gray-50 border border-white",style:{flexGrow:l.weight,flexBasis:window.innerWidth<768?"100%":`${l.weight*300}px`,height:window.innerWidth<768?"350px":"550px"},onClick:()=>n(s),children:l.type==="video"&&l.source!=="youtube"?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:l.url,className:"w-full h-full object-cover group-hover:scale-105 transition-all duration-[2s]",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-20 h-20 bg-[#007BFF]/90 backdrop-blur-xl rounded-full flex items-center justify-center text-white shadow-2xl transition-all group-hover:scale-110",children:e.jsx(w,{size:28,fill:"currentColor"})})})]}):l.type==="video"&&l.source==="youtube"?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:`https://img.youtube.com/vi/${g(l.url)}/maxresdefault.jpg`,className:"w-full h-full object-cover group-hover:scale-105 transition-all duration-[2s]",alt:""}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-20 h-20 bg-[#FF0000]/90 backdrop-blur-xl rounded-full flex items-center justify-center text-white shadow-2xl transition-all group-hover:scale-110",children:e.jsx(w,{size:28,fill:"currentColor"})})})]}):e.jsx(e.Fragment,{children:e.jsx("img",{src:l.url,className:"w-full h-full object-cover group-hover:scale-105 transition-all duration-[2s]",alt:""})})},l.id))})}),e.jsx(F,{children:a!==null&&t.gallery&&e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-3xl p-4",onClick:()=>n(null),children:[e.jsx("button",{className:"absolute top-10 right-10 text-white/50 hover:text-white transition-colors z-50",onClick:()=>n(null),children:e.jsx(D,{size:48})}),e.jsxs("div",{className:"absolute top-10 left-10 text-white/70 font-black text-sm uppercase tracking-widest z-50",children:[a+1," / ",t.gallery.length]}),t.gallery.length>1&&e.jsx("button",{onClick:l=>{l.stopPropagation(),n(a===0?t.gallery.length-1:a-1)},className:"absolute left-10 top-1/2 -translate-y-1/2 p-4 hover:bg-white/10 rounded-full text-white transition-all z-50",title:"Předchozí",children:e.jsx(L,{size:36})}),t.gallery.length>1&&e.jsx("button",{onClick:l=>{l.stopPropagation(),n(a===t.gallery.length-1?0:a+1)},className:"absolute right-10 top-1/2 -translate-y-1/2 p-4 hover:bg-white/10 rounded-full text-white transition-all z-50",title:"Další",children:e.jsx(M,{size:36})}),e.jsx("div",{className:"w-full h-full flex items-center justify-center max-w-7xl mx-auto",onClick:l=>l.stopPropagation(),children:t.gallery[a].type==="video"?t.gallery[a].source==="youtube"?e.jsx("div",{className:"aspect-video w-full max-w-6xl bg-black rounded-sm overflow-hidden shadow-2xl",children:e.jsx("iframe",{src:p(t.gallery[a].url),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Video"})}):e.jsx("video",{src:t.gallery[a].url,autoPlay:!0,controls:!0,className:"max-w-full max-h-[90vh] object-contain shadow-2xl"}):e.jsx("img",{src:t.gallery[a].url,className:"max-w-full max-h-[90vh] object-contain shadow-2xl",alt:""})})]})})]}):null};export{U as default};
