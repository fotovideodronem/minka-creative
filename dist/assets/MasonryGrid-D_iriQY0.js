import{j as t,m as h}from"./motion-ehv0MlpY.js";import{r as u,u as y,L as g}from"./react-vendor-BRpVHgt8.js";import{M as o}from"./index-DgYYbPtC.js";import{q as f,l as x,s as b,z as v}from"./icons-Cc-UGH4M.js";const w=e=>{const a=[...e];for(let r=a.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[a[r],a[s]]=[a[s],a[r]]}return a},d=e=>{const a=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/);return a?a[1]:null},M=e=>{const a=d(e);return a?`https://www.youtube.com/embed/${a}`:e},n=e=>{const a=(e.gallery||[]).find(s=>s.type==="video");if(a)return a.source==="youtube"?e.youtubeCoverUrl?{type:"image",url:e.youtubeCoverUrl}:{type:"youtube",url:a.url}:{type:"video",url:a.url};const r=(e.gallery||[]).filter(s=>s.type==="image");return r.length>0?{type:"image",url:r[Math.floor(Math.random()*r.length)].url}:{type:"image",url:e.thumbnailUrl}},k=({project:e,weight:a,showSpecialization:r})=>{const[s,l]=u.useState(!1),c=y(),m=i=>{switch(i){case o.VIDEO:return t.jsxs(t.Fragment,{children:[t.jsx(v,{size:10,fill:"currentColor"})," FILM"]});case o.BOTH:return t.jsxs(t.Fragment,{children:[t.jsx(b,{size:10})," KOMBO"]});default:return t.jsxs(t.Fragment,{children:[t.jsx(x,{size:10})," FOTO"]})}},p=i=>{i.preventDefault(),i.stopPropagation(),c(`/portfolio?spec=${e.categoryId}`)};return t.jsx("div",{style:{flexGrow:a,flexBasis:window.innerWidth<768?"100%":`${a*300}px`},className:"relative group overflow-hidden h-[300px] md:h-[500px] bg-black border border-white/5",children:t.jsxs(g,{to:`/projekt/${e.id}`,className:"block w-full h-full relative",children:[t.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",children:[e.displayMediaType==="video"?t.jsx("video",{src:e.displayMediaUrl,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onLoadedData:()=>l(!0),className:"w-full h-full object-cover grayscale-[0.3] group-hover:grayscale-0 group-hover:scale-110 transition-transform duration-[3s] ease-out"}):e.displayMediaType==="youtube"?t.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[t.jsx("iframe",{src:`${M(e.displayMediaUrl)}?autoplay=1&mute=1&loop=1&playlist=${d(e.displayMediaUrl)}&controls=0&showinfo=0&modestbranding=1&playsinline=1&fs=0&rel=0&iv_load_policy=3&disablekb=1`,className:"absolute",style:{top:"50%",left:"50%",width:"177.77777778vh",height:"56.25vw",minHeight:"100%",minWidth:"100%",transform:"translate(-50%, -50%)",pointerEvents:"none"},allow:"autoplay; encrypted-media",onLoad:()=>l(!0)}),t.jsx("div",{className:"absolute inset-0",style:{pointerEvents:"auto"}})]}):t.jsx(h.img,{src:e.displayMediaUrl,alt:e.title,loading:"lazy",onLoad:()=>l(!0),animate:{opacity:s?1:0},transition:{duration:1},className:"w-full h-full object-cover grayscale-[0.3] group-hover:grayscale-0 group-hover:scale-110 transition-transform duration-[3s] ease-out"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent z-10 opacity-90 group-hover:opacity-60 transition-opacity duration-700"}),t.jsx("div",{className:"absolute inset-0 bg-[#007BFF]/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-15"})]}),t.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-6 md:p-12 text-white z-20 pointer-events-none",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[t.jsx("span",{className:`px-4 py-1 text-[8px] font-black uppercase tracking-widest flex items-center gap-2 text-white ${e.type===o.VIDEO?"bg-[#FF3B30]":e.type===o.BOTH?"bg-[#2ECC71]":"bg-[#007BFF]"}`,children:m(e.type)}),r&&t.jsx("button",{onClick:p,className:"pointer-events-auto bg-white/10 backdrop-blur-md px-4 py-1.5 text-[8px] font-black uppercase tracking-widest border border-white/10 text-white/80 hover:bg-[#007BFF] hover:text-white transition-all",children:e.category})]}),t.jsx("h3",{className:"text-2xl md:text-5xl font-black mb-4 tracking-tighter uppercase leading-[0.9] group-hover:text-[#007BFF] transition-colors duration-500",children:e.title}),t.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-[0.5em] text-white/40 group-hover:text-[#007BFF] transition-all duration-500 group-hover:translate-x-2",children:["DETAIL PROJEKTU ",t.jsx(f,{size:16})]})]})]})})},T=({projects:e,showSpecialization:a=!1})=>{const r=u.useMemo(()=>!e||e.length===0?[]:w(e).map(l=>({...l,displayMediaType:n(l).type,displayMediaUrl:n(l).url,weight:Math.random()>.5?2:1.2})),[e]);return t.jsx("div",{className:"w-full flex flex-wrap bg-black",children:r.map((s,l)=>t.jsx(k,{project:s,weight:s.weight||1,showSpecialization:a},`${s.id}-${l}`))})};export{T as M};
