import{j as e,m as E,A as ae}from"./motion-ehv0MlpY.js";import{r as n,u as At,L as $t}from"./react-vendor-BRpVHgt8.js";import{m as X,o as It,s as Fe,d as ie,M as Be,S as ze,p as Ae,b as Xe,g as bt,c as Vt}from"./index-DnveLcks.js";import{a0 as We,a1 as Bt,G as Oe,a2 as st,a3 as ft,a4 as Pe,a5 as $e,a6 as Ve,a7 as yt,a8 as pe,a9 as Dt,aa as Re,a as qe,ab as et,ac as ve,X as ce,D as Rt,V as Ge,ad as tt,R as Qe,ae as Je,$ as De,af as Se,h as Pt,r as at,ag as rt,e as Ze,ah as Ht,ai as Kt,aj as Zt,ak as Tt,al as Mt,Q as qt,am as Gt,an as Jt,o as Wt,ao as Qt,s as jt,l as Ee,U as vt,W as kt,k as Nt,ap as Yt,M as Xt,aq as wt,O as Et,I as ea,F as ta,Y as aa,g as sa,b as ra,C as Ot,L as la,E as na,S as zt,j as ia,ar as oa,as as ca,Z as da,c as xa,at as pa,f as ua,au as Ft,av as ma,n as ga,aw as ha,ax as ba,ay as St,az as fa,aA as ya,aB as ja}from"./icons-Cc-UGH4M.js";import"./supabase-DlXWbh3n.js";const Ct=200,va=["video/mp4","video/webm","video/quicktime"],ka=()=>{var lt,nt,it,ot,ct,dt,xt,pt,ut,mt,gt;const[r,g]=n.useState(null),[D,P]=n.useState(""),[u,z]=n.useState([]),[b,C]=n.useState(null),[c,d]=n.useState(new Set),[I,S]=n.useState([]),[N,$]=n.useState(!1),[k,x]=n.useState(null),[f,j]=n.useState(""),[F,O]=n.useState(""),[l,y]=n.useState(""),[s,B]=n.useState(null),[_,U]=n.useState(null),[h,v]=n.useState("grid"),[o,A]=n.useState(null),[se,ke]=n.useState(null),[q,Ne]=n.useState(null),[he,ee]=n.useState(null),[G,ue]=n.useState("name"),[re,He]=n.useState("asc"),[Ue,be]=n.useState(!1),oe=n.useRef(null),W=async()=>{console.log("üìÇ [LOAD] Loading files from database...");const t=await X.getAll({force:!0});console.log("üìÇ [LOAD] Loaded",t.length,"items from DB"),console.log("üìÇ [LOAD] Sample items:",t.slice(0,3).map(m=>({name:m.name,parentId:m.parentId,type:typeof m.parentId})));const i=t.map(m=>({...m,parentId:m.parentId||null}));console.log("üìÇ [LOAD] After || null mapping:",i.slice(0,3).map(m=>({name:m.name,parentId:m.parentId,type:typeof m.parentId}))),z(i)};n.useEffect(()=>(W(),window.addEventListener("storage",W),()=>window.removeEventListener("storage",W)),[]);const Ce=async t=>{var fe,K,de,ge;const i=t.target.files;if(!i||i.length===0)return;const m=parseFloat(localStorage.getItem("jakub_minka_compression_quality")||"0.8"),w=Array.from(i);console.log("üì§ [UPLOAD] Started:",{filesCount:w.length,currentFolderId:r,currentFolderName:r?(fe=u.find(Z=>Z.id===r))==null?void 0:fe.name:"ko≈ôen",itemsInDB:u.length});for(const Z of w){const xe=Z.name.split(".")[0],Le=u.find(ne=>ne.name===xe&&ne.type!=="folder");if(Le){const ne=Le.parentId?((K=u.find(Me=>Me.id===Le.parentId))==null?void 0:K.name)||"nezn√°m√° slo≈æka":"ko≈ôen";alert(`‚ùå Soubor "${Z.name}" ji≈æ existuje v syst√©mu (slo≈æka: ${ne}). Duplicitn√≠ soubory nejsou povoleny.`);continue}if(Z.type.startsWith("video/")){if(!va.includes(Z.type)){alert(`‚ùå Nepodporovan√Ω form√°t videa: ${Z.type}.
Pou≈æijte pros√≠m MP4 nebo WebM.`);continue}const ne=Ct*1024*1024;if(Z.size>ne){alert(`‚ùå Video "${Z.name}" je p≈ô√≠li≈° velk√© (${(Z.size/(1024*1024)).toFixed(0)} MB).
Maxim√°ln√≠ velikost je ${Ct} MB. Doporuƒçuji export do MP4 (H.264) a sn√≠≈æen√≠ bitrate.`);continue}}const _e=Math.random().toString(36).substr(2,9),Lt={id:_e,fileName:Z.name,progress:0,status:Z.type.startsWith("image/")?"optimizing":"uploading"};S(ne=>[Lt,...ne]),$(!1);try{let ne=Z;Z.type.startsWith("image/")&&(ne=await It(Z,m/100),S(je=>je.map(me=>me.id===_e?{...me,status:"uploading"}:me)));const Me="m-"+Math.random().toString(36).substr(2,9),Ie=`uploads/${Me}_${Z.name.replace(/[^a-zA-Z0-9._-]/g,"_")}`,ht=await Fe.storage.from("media").upload(Ie,ne,{cacheControl:"3600",upsert:!0});if(ht.error){S(je=>je.map(me=>me.id===_e?{...me,status:"error",error:ht.error.message||"Upload failed"}:me));continue}const _t=((de=Fe.storage.from("media").getPublicUrl(Ie).data)==null?void 0:de.publicUrl)||"",we={id:Me,name:Z.name.split(".")[0],type:Z.type.startsWith("image")?"image":Z.type.startsWith("video")?"video":"other",size:`${(ne.size/(1024*1024)).toFixed(2)} MB`,url:_t,parentId:r,specializationId:Ie,updatedAt:new Date().toISOString()};console.log("üíæ [UPLOAD] Saving to database:",{name:we.name,parentId:we.parentId,folderName:we.parentId?(ge=u.find(je=>je.id===we.parentId))==null?void 0:ge.name:"ko≈ôen"}),await X.save(we);const ye=(await X.getAll({force:!0})).find(je=>je.id===we.id);console.log("‚úÖ [UPLOAD] File saved, verified in DB:",{name:ye==null?void 0:ye.name,savedParentId:ye==null?void 0:ye.parentId,expectedParentId:we.parentId,match:(ye==null?void 0:ye.parentId)===we.parentId}),S(je=>je.map(me=>me.id===_e?{...me,status:"completed",progress:100}:me)),console.log("[UPLOAD] Reloading files after save..."),await W()}catch(ne){S(Me=>Me.map(Ie=>Ie.id===_e?{...Ie,status:"error",error:ne.message||"Upload failed"}:Ie))}}oe.current&&(oe.current.value="")},a=async t=>{const i=u.find(m=>m.id===t);if(i)try{if(i.type!=="folder"&&i.specializationId){const{error:m}=await Fe.storage.from("media").remove([i.specializationId]);if(m&&!m.message.includes("not found"))throw m}await X.delete(t),localStorage.removeItem("jakub_minka_cache_media_meta"),localStorage.removeItem("jakub_minka_cache_media_meta_ts"),B(null),await W()}catch(m){console.error("Delete error:",m),alert("Chyba p≈ôi maz√°n√≠: "+(m instanceof Error?m.message:"Nezn√°m√° chyba"))}},p=async()=>{if(c.size!==0)try{let t=[];for(const i of c){const m=u.find(w=>w.id===i);if(m)try{if(m.type!=="folder"&&m.specializationId){const{error:w}=await Fe.storage.from("media").remove([m.specializationId]);w&&!w.message.includes("not found")&&console.warn(`Storage delete warning for ${m.name}:`,w)}await X.delete(i)}catch(w){console.error(`Error deleting ${m.name}:`,w),t.push(m.name)}}be(!1),d(new Set),W(),t.length>0&&alert(`Nƒõkter√© polo≈æky nebylo mo≈æn√© smazat: ${t.join(", ")}`)}catch(t){console.error("Bulk delete error:",t),alert("Chyba p≈ôi hromadn√©m maz√°n√≠: "+(t instanceof Error?t.message:"Nezn√°m√° chyba"))}},L=async t=>{var i;if(c.size!==0)try{console.log("üîÑ [BULK MOVE] Moving",c.size,"items to folder:",t);let m=[];for(const K of c){const de=u.find(ge=>ge.id===K);if(de)try{await X.update(K,{parentId:t}),console.log("‚úÖ [BULK MOVE] Moved:",de.name)}catch(ge){console.error(`‚ùå [BULK MOVE] Error moving ${de.name}:`,ge),m.push(de.name)}}ee(null),d(new Set);const w=await X.getAll({force:!0});z(w.map(K=>({...K,parentId:K.parentId||null})));const fe=t?((i=w.find(K=>K.id===t))==null?void 0:i.name)||"slo≈æka":"ko≈ôen";m.length===0?alert(`‚úì P≈ôesunuto ${c.size} polo≈æek do "${fe}"`):alert(`ƒå√°steƒçnƒõ dokonƒçeno. Nƒõkter√© polo≈æky se nepoda≈ôilo p≈ôesunout: ${m.join(", ")}`)}catch(m){console.error("‚ùå [BULK MOVE] Bulk move error:",m),alert("Chyba p≈ôi hromadn√©m p≈ôesouv√°n√≠: "+(m instanceof Error?m.message:"Nezn√°m√° chyba"))}},T=(t,i)=>{ke(i),t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",i))},J=(t,i)=>{t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move"),Ne(i)},R=()=>{Ne(null)},M=async(t,i)=>{var w;t.preventDefault(),t.stopPropagation();const m=se||((w=t.dataTransfer)==null?void 0:w.getData("text/plain"));m&&m!==i&&await le(m,i),Ne(null),ke(null)},V=async(t,i,m,w)=>{if(!(!i.trim()||!u.find(K=>K.id===t)))try{const K={name:i};m!==void 0&&(K.alt=m),w!==void 0&&(K.description=w),await X.update(t,K),x(null),j(""),O(""),y(""),W()}catch(K){console.error("Update error:",K),alert("Chyba p≈ôi ukl√°d√°n√≠")}},le=async(t,i)=>{var m;console.log("üîÑ [MOVE] Starting move:",{itemId:t,targetFolderId:i,timestamp:new Date().toISOString()});try{const w=u.find(xe=>xe.id===t);if(!w)throw console.error("‚ùå [MOVE] Item not found in current items:",t),new Error("Item not found");console.log("üì¶ [MOVE] Item to move:",{name:w.name,currentParentId:w.parentId,targetParentId:i}),console.log("üíæ [MOVE] Updating database with parentId =",i);const fe=await X.update(t,{parentId:i});if(console.log("‚úÖ [MOVE] Database update response:",fe),!fe||!fe.id)throw new Error("Database update failed - no valid response");console.log("üîç [MOVE] Verifying DB update...");const K=await X.getAll({force:!0}).then(xe=>xe.find(Le=>Le.id===t));if(!K)throw new Error("Item disappeared from database after move");console.log("‚úÖ [MOVE] Verified in DB:",{name:K.name,parentId:K.parentId}),ee(null),ke(null),Ne(null),console.log("üîÑ [MOVE] Reloading all items from database...");const de=await X.getAll({force:!0}),ge=de.find(xe=>xe.id===t);console.log("üîÑ [MOVE] Reloaded complete:",{totalItems:de.length,movedItemParentId:ge==null?void 0:ge.parentId}),z(de.map(xe=>({...xe,parentId:xe.parentId||null})));const Z=i?((m=de.find(xe=>xe.id===i))==null?void 0:m.name)||"slo≈æka":"ko≈ôen";console.log("‚úÖ [MOVE] Move completed successfully:",{from:w.name,to:Z}),alert(`‚úì "${w.name}" p≈ôesunuto do "${Z}"`)}catch(w){console.error("‚ùå [MOVE] Move failed:",{error:w instanceof Error?w.message:String(w),stack:w instanceof Error?w.stack:void 0,itemId:t,targetFolderId:i}),ee(null),alert("‚ùå Chyba p≈ôi p≈ôesunut√≠: "+(w instanceof Error?w.message:"Nezn√°m√° chyba"))}},Y=(t,i)=>{t.preventDefault(),t.stopPropagation(),A({x:t.clientX,y:t.clientY,itemId:i})},te=async()=>{const t=prompt("N√°zev nov√© slo≈æky:");if(t!=null&&t.trim())try{const m={id:"f-"+Math.random().toString(36).substr(2,9),name:t,type:"folder",parentId:r,size:"‚Äî",url:"",updatedAt:new Date().toISOString(),specializationId:""};await X.save(m),W()}catch(i){console.error("Create folder error:",i),alert("Chyba p≈ôi vytv√°≈ôen√≠ slo≈æky")}},Q=n.useMemo(()=>{console.log(`
üîç [FILTER] ============ FILTERING ITEMS ============`),console.log("üîç [FILTER] Current folder:",r),console.log("üîç [FILTER] Total items:",u.length),console.log("üîç [FILTER] All items parentIds:",u.map(i=>({name:i.name,parentId:i.parentId,type:i.type})));let t=u.filter(i=>{const m=i.parentId===r;return console.log(`üîç [FILTER] "${i.name}" - parentId: "${i.parentId}" ${typeof i.parentId}, currentFolderId: "${r}" ${typeof r}, match: ${m}`),m&&(D===""||i.name.toLowerCase().includes(D.toLowerCase()))});return console.log("‚úÖ [FILTER] Filtered to",t.length,"items:",t.map(i=>i.name)),console.log(`üîç [FILTER] ========================================
`),t.sort((i,m)=>{let w=0;return G==="name"?w=i.name.localeCompare(m.name):G==="date"?w=new Date(i.updatedAt).getTime()-new Date(m.updatedAt).getTime():G==="type"&&(w=i.type.localeCompare(m.type)),re==="asc"?w:-w}),t.sort((i,m)=>i.type==="folder"&&m.type!=="folder"?-1:i.type!=="folder"&&m.type==="folder"?1:0)},[u,r,D,G,re]),H=n.useMemo(()=>Q.filter(t=>t.type!=="folder"),[Q]),Te=n.useMemo(()=>{let t=r;const i=[];for(;t;){const m=u.find(w=>w.id===t&&w.type==="folder");if(!m)break;i.unshift({id:m.id,name:m.name,itemCount:u.filter(w=>w.parentId===t&&w.type!=="folder").length}),t=m.parentId||null}return i},[u,r]),Ke=t=>{switch(t){case"folder":return e.jsx(Re,{size:32,className:"text-[#007BFF]"});case"image":return e.jsx(De,{size:32,className:"text-purple-500"});case"video":return e.jsx(Ge,{size:32,className:"text-red-500"});default:return e.jsx(Je,{size:32,className:"text-gray-500"})}},Ye=t=>t?new Date(t).toLocaleDateString("cs-CZ",{year:"numeric",month:"2-digit",day:"2-digit"}):"‚Äî";return e.jsxs("div",{className:"flex flex-col bg-white border border-gray-200 rounded-sm min-h-[80vh]",children:[e.jsxs("div",{className:"p-6 border-b bg-gray-50 sticky top-0 z-40",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-black uppercase tracking-widest text-black",children:"Spr√°vce m√©di√≠"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>v(h==="grid"?"list":"grid"),className:"p-2 hover:bg-gray-200 rounded",title:`P≈ôepnout na ${h==="grid"?"seznam":"m≈ô√≠≈æku"}`,children:h==="grid"?e.jsx(We,{size:18}):e.jsx(Bt,{size:18})})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-black uppercase tracking-widest text-gray-500 mb-4",children:[e.jsx("button",{onClick:()=>g(null),className:`hover:text-[#007BFF] transition-colors ${r?"":"text-[#007BFF]"}`,children:"Ko≈ôen"}),Te.map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{size:14,className:"text-gray-300"}),e.jsx("button",{onClick:()=>{console.log("üìÅ Breadcrumb folder clicked:",t.name,"id:",t.id),g(t.id)},className:"hover:text-[#007BFF] transition-colors",children:t.name})]},t.id))]}),e.jsxs("div",{className:"flex gap-3 flex-wrap items-center",children:[e.jsxs("button",{onClick:()=>{var t;return(t=oe.current)==null?void 0:t.click()},className:"bg-[#007BFF] text-white px-6 py-2 text-[10px] font-black uppercase tracking-widest flex items-center gap-2 hover:bg-blue-700 transition-all rounded",children:[e.jsx(st,{size:14})," Nahr√°t"]}),e.jsx("input",{type:"file",multiple:!0,ref:oe,className:"hidden",onChange:Ce}),e.jsxs("button",{onClick:te,className:"border-2 border-[#007BFF] bg-white text-[#007BFF] px-6 py-2 text-[10px] font-black uppercase tracking-widest flex items-center gap-2 rounded hover:bg-blue-50 transition-all",children:[e.jsx(ft,{size:14})," Nov√° slo≈æka"]}),e.jsxs("div",{className:"relative flex-1 min-w-64",children:[e.jsx(Pe,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"HLEDAT...",value:D,onChange:t=>P(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 bg-white text-black text-[10px] font-black uppercase rounded focus:border-[#007BFF] outline-none"})]}),e.jsxs("select",{value:G,onChange:t=>ue(t.target.value),className:"px-4 py-2 border border-gray-200 rounded text-[10px] font-black uppercase bg-white hover:border-[#007BFF] cursor-pointer",children:[e.jsx("option",{value:"name",children:"Se≈ôadit: N√°zev"}),e.jsx("option",{value:"date",children:"Se≈ôadit: Datum"}),e.jsx("option",{value:"type",children:"Se≈ôadit: Typ"})]}),e.jsx("button",{onClick:()=>He(re==="asc"?"desc":"asc"),className:"px-4 py-2 border border-gray-200 rounded text-[10px] font-black uppercase bg-white hover:bg-gray-50",title:re==="asc"?"Vzestupnƒõ":"Sestupnƒõ",children:re==="asc"?"‚ñ≤":"‚ñº"}),c.size===0?e.jsxs("button",{onClick:()=>d(new Set(Q.map(t=>t.id))),className:"px-6 py-2 border-2 border-gray-300 text-gray-600 text-[10px] font-black uppercase rounded hover:border-[#007BFF] hover:text-[#007BFF] transition-all flex items-center gap-2",title:"Vybrat v≈°e v aktu√°ln√≠ slo≈æce",children:[e.jsx($e,{size:14})," Vybrat v≈°e"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d(new Set),className:"px-6 py-2 border-2 border-gray-300 text-gray-600 text-[10px] font-black uppercase rounded hover:border-orange-500 hover:text-orange-500 transition-all flex items-center gap-2",children:[e.jsx(Ve,{size:14})," Odznaƒçit (",c.size,")"]}),e.jsxs("button",{onClick:()=>ee("__select__"),className:"px-6 py-2 bg-[#007BFF] text-white text-[10px] font-black uppercase rounded hover:bg-blue-700 transition-all flex items-center gap-2",children:[e.jsx(yt,{size:14})," P≈ôesunout ",c.size]}),e.jsxs("button",{onClick:()=>be(!0),className:"px-6 py-2 bg-red-500 text-white text-[10px] font-black uppercase rounded hover:bg-red-600 transition-all flex items-center gap-2",children:[e.jsx(pe,{size:14})," Smazat ",c.size]})]})]})]}),h==="grid"?e.jsx("div",{className:"p-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 flex-1 overflow-auto bg-white",children:Q.length===0?e.jsxs("div",{className:"col-span-full py-20 text-center text-gray-400",children:[e.jsx(Dt,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsx("p",{className:"text-[11px] font-black uppercase tracking-widest",children:"Slo≈æka je pr√°zdn√°"})]}):Q.map(t=>e.jsx(E.div,{layout:!0,className:"relative group",children:e.jsxs("div",{className:`relative flex flex-col items-center gap-3 p-3 border-2 rounded hover:border-[#007BFF] transition-all cursor-pointer bg-gray-50 hover:bg-white h-full ${q===t.id&&t.type==="folder"?"border-[#007BFF] bg-blue-50":"border-gray-100"}`,onClick:()=>{t.type==="folder"?(console.log("üìÅ Grid folder clicked:",t.name,"id:",t.id),g(t.id)):C(H.findIndex(i=>i.id===t.id))},onContextMenu:i=>Y(i,t.id),draggable:t.type!=="folder",onDragStart:i=>t.type!=="folder"&&T(i,t.id),onDragOver:i=>t.type==="folder"&&J(i,t.id),onDragLeave:R,onDrop:i=>t.type==="folder"&&M(i,t.id),children:[e.jsx("div",{className:`w-full aspect-square flex items-center justify-center overflow-hidden rounded bg-white transition-all ${q===t.id&&t.type==="folder"?"ring-2 ring-[#007BFF]":""}`,children:t.type==="folder"?e.jsx("div",{className:`transition-all ${q===t.id?"scale-110 text-[#007BFF]":"text-[#007BFF]/40"}`,children:e.jsx(Re,{size:48})}):t.type==="image"&&t.url?e.jsx("img",{src:t.url,alt:t.name,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all"}):Ke(t.type)}),e.jsx("p",{className:"text-[9px] font-black uppercase truncate w-full text-center text-gray-600 group-hover:text-[#007BFF]",children:t.name}),t.type!=="folder"&&e.jsx("p",{className:"text-[8px] text-gray-400",children:t.size}),e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("button",{onClick:i=>{i.stopPropagation(),d(m=>{const w=new Set(m);return w.has(t.id)?w.delete(t.id):w.add(t.id),w})},className:`p-2 rounded transition-all ${c.has(t.id)?"bg-[#007BFF] text-white":"bg-white/80 text-gray-400 group-hover:text-gray-600"}`,children:c.has(t.id)?e.jsx($e,{size:16}):e.jsx(Ve,{size:16})})}),e.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 opacity-0 group-hover:opacity-100 transition-all rounded flex items-center justify-center gap-2",children:[t.type!=="folder"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:i=>{i.stopPropagation();const m=H.findIndex(w=>w.id===t.id);m>=0&&C(m)},className:"p-2 bg-white/20 hover:bg-white/40 rounded text-white backdrop-blur",title:"N√°hled",children:e.jsx(qe,{size:16})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),U(t)},className:"p-2 bg-white/20 hover:bg-white/40 rounded text-white backdrop-blur",title:"Metadata",children:e.jsx(et,{size:16})})]}),e.jsx("button",{onClick:i=>{i.stopPropagation(),x(t),j(t.name)},className:"p-2 bg-white/20 hover:bg-white/40 rounded text-white backdrop-blur",title:"P≈ôejmenovat",children:e.jsx(ve,{size:16})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),B(t.id)},className:"p-2 bg-red-500/40 hover:bg-red-500/60 rounded text-white backdrop-blur",title:"Smazat",children:e.jsx(pe,{size:16})})]})]})},t.id))}):e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full text-[11px] font-black uppercase tracking-widest",children:[e.jsx("thead",{className:"sticky top-0 bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-center w-12",children:e.jsx("button",{onClick:()=>{c.size===Q.length?d(new Set):d(new Set(Q.map(t=>t.id)))},className:"text-gray-600 hover:text-gray-900",children:c.size===Q.length&&Q.length>0?e.jsx($e,{size:14}):e.jsx(Ve,{size:14})})}),e.jsx("th",{className:"px-6 py-3 text-left",children:"N√°zev"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Typ"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Velikost"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Datum"}),e.jsx("th",{className:"px-6 py-3 text-center",children:"Akce"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Q.map(t=>e.jsxs("tr",{className:`hover:bg-gray-50 transition-all ${c.has(t.id)?"bg-blue-50":""} ${q===t.id&&t.type==="folder"?"bg-blue-100 ring-1 ring-[#007BFF]":""}`,draggable:t.type!=="folder",onDragStart:i=>t.type!=="folder"&&T(i,t.id),onDragOver:i=>t.type==="folder"&&J(i,t.id),onDragLeave:R,onDrop:i=>t.type==="folder"&&M(i,t.id),children:[e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("button",{onClick:i=>{i.stopPropagation(),d(m=>{const w=new Set(m);return w.has(t.id)?w.delete(t.id):w.add(t.id),w})},className:"text-gray-600 hover:text-[#007BFF]",children:c.has(t.id)?e.jsx($e,{size:14}):e.jsx(Ve,{size:14})})}),e.jsxs("td",{className:"px-6 py-3 flex items-center gap-3",children:[t.type==="folder"?e.jsx("div",{className:`transition-all ${q===t.id?"text-[#007BFF] scale-110":"text-gray-600"}`,children:e.jsx(Re,{size:16})}):Ke(t.type),e.jsx("span",{className:"truncate",children:t.name})]}),e.jsx("td",{className:"px-6 py-3 text-gray-500",children:t.type==="folder"?"üìÅ Slo≈æka":t.type==="image"?"üñºÔ∏è Foto":t.type==="video"?"üé¨ Video":"üìÑ Soubor"}),e.jsx("td",{className:"px-6 py-3 text-gray-500",children:t.size||"‚Äî"}),e.jsx("td",{className:"px-6 py-3 text-gray-500",children:Ye(t.updatedAt)}),e.jsx("td",{className:"px-6 py-3 text-center",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[t.type!=="folder"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(H.findIndex(i=>i.id===t.id)),className:"p-1 hover:text-[#007BFF]",title:"N√°hled",children:e.jsx(qe,{size:14})}),e.jsx("button",{onClick:()=>{U(t),j(t.name),O(t.alt||""),y(t.description||"")},className:"p-1 hover:text-[#007BFF]",title:"Metadata",children:e.jsx(et,{size:14})})]}),e.jsx("button",{onClick:()=>{x(t),j(t.name)},className:"p-1 hover:text-[#007BFF]",title:"P≈ôejmenovat",children:e.jsx(ve,{size:14})}),e.jsx("button",{onClick:()=>B(t.id),className:"p-1 hover:text-red-500",title:"Smazat",children:e.jsx(pe,{size:14})})]})})]},t.id))})]})}),e.jsx(ae,{children:b!==null&&H[b]&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(null),className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",children:e.jsxs(E.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:t=>t.stopPropagation(),className:"bg-black rounded flex flex-col h-full max-h-[95vh] w-full max-w-7xl",children:[e.jsxs("div",{className:"border-b border-gray-700 p-4 flex justify-between items-center bg-gray-900",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-1",children:[b+1," z ",H.length]}),e.jsx("h3",{className:"text-lg font-black uppercase tracking-widest text-white max-w-sm truncate",children:(lt=H[b])==null?void 0:lt.name})]}),e.jsx("button",{onClick:()=>C(null),className:"p-2 hover:bg-gray-800 rounded text-white",children:e.jsx(ce,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[e.jsx("button",{onClick:()=>C(b>0?b-1:H.length-1),className:"p-4 hover:bg-gray-800/50 transition-all text-white flex items-center justify-center",title:"P≈ôedchoz√≠",children:e.jsx(Rt,{size:32})}),e.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden bg-black",children:[((nt=H[b])==null?void 0:nt.type)==="image"&&((it=H[b])==null?void 0:it.url)&&e.jsx("img",{src:H[b].url,alt:H[b].name,className:"max-w-full max-h-full object-contain"}),((ot=H[b])==null?void 0:ot.type)==="video"&&((ct=H[b])==null?void 0:ct.url)&&e.jsx("video",{src:H[b].url,controls:!0,className:"max-w-full max-h-full object-contain",autoPlay:!0})]}),e.jsx("button",{onClick:()=>C(b<H.length-1?b+1:0),className:"p-4 hover:bg-gray-800/50 transition-all text-white flex items-center justify-center",title:"Dal≈°√≠",children:e.jsx(Oe,{size:32})})]}),e.jsxs("div",{className:"border-t border-gray-700 bg-gray-900 p-6 grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black uppercase text-gray-500 mb-1",children:"Typ"}),e.jsx("p",{className:"text-white",children:(dt=H[b])==null?void 0:dt.type.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black uppercase text-gray-500 mb-1",children:"Velikost"}),e.jsx("p",{className:"text-white",children:((xt=H[b])==null?void 0:xt.size)||"‚Äî"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black uppercase text-gray-500 mb-1",children:"Vytvo≈ôeno"}),e.jsx("p",{className:"text-white text-sm",children:Ye((pt=H[b])==null?void 0:pt.updatedAt)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{U(H[b]),C(null)},className:"flex-1 px-3 py-2 bg-[#007BFF] text-white rounded text-[9px] font-black uppercase hover:bg-blue-700 transition-all",children:"Metadata"}),e.jsx("button",{onClick:()=>{var t;B(((t=H[b])==null?void 0:t.id)||null),C(null)},className:"px-3 py-2 bg-red-600 text-white rounded text-[9px] font-black uppercase hover:bg-red-700 transition-all",children:"Smazat"})]})]})]})})}),e.jsx(ae,{children:_&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>U(null),className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6 overflow-y-auto",children:e.jsxs(E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-white rounded p-8 max-w-lg w-full space-y-6 my-8",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black uppercase tracking-widest mb-2",children:"Metadata"}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:_.name})]}),e.jsx("button",{onClick:()=>U(null),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{className:"space-y-5 text-[11px] font-black uppercase tracking-widest",children:[e.jsxs("div",{className:"flex items-center justify-center w-full h-40 bg-gray-50 rounded border border-gray-200",children:[_.type==="image"&&_.url&&e.jsx("img",{src:_.url,alt:"",className:"max-w-full max-h-full object-contain"}),_.type==="video"&&e.jsx(Ge,{size:48,className:"text-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"N√°zev"}),e.jsx("input",{type:"text",value:f,onChange:t=>j(t.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded focus:border-[#007BFF] outline-none text-[10px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Popis"}),e.jsx("textarea",{placeholder:"P≈ôidej popis souboru...",rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded focus:border-[#007BFF] outline-none text-[10px] resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"≈†t√≠tky"}),e.jsx("input",{type:"text",placeholder:"Oddƒõluj ƒç√°rkami: tag1, tag2, tag3",className:"w-full px-4 py-2 border border-gray-200 rounded focus:border-[#007BFF] outline-none text-[10px]"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Typ"}),e.jsx("p",{className:"text-gray-800",children:_.type.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Velikost"}),e.jsx("p",{className:"text-gray-800",children:_.size||"‚Äî"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Vytvo≈ôeno"}),e.jsx("p",{className:"text-gray-800",children:Ye(_.updatedAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"ID"}),e.jsx("p",{className:"text-gray-800 text-[9px] font-mono break-all",children:_.id})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:_.url,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-200 rounded bg-gray-50 text-[9px] font-mono"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(_.url),alert("URL zkop√≠rov√°n")},className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded text-[9px]",children:"Kop√≠rovat"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"ALT text (popis obr√°zku pro SEO)"}),e.jsx("input",{type:"text",value:F,onChange:t=>O(t.target.value),placeholder:"Kr√°tk√Ω popis obr√°zku pro vyhled√°vaƒçe a ƒçteƒçky...",className:"w-full px-4 py-2 border border-gray-200 rounded focus:outline-none focus:border-[#007BFF] text-[10px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Popis / pozn√°mky"}),e.jsx("textarea",{value:l,onChange:t=>y(t.target.value),placeholder:"Voliteln√Ω del≈°√≠ popis nebo pozn√°mky k souboru...",className:"w-full px-4 py-2 border border-gray-200 rounded focus:outline-none focus:border-[#007BFF] text-[10px] min-h-[80px]"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{V(_.id,f,F,l),U(null)},className:"flex-1 bg-[#007BFF] text-white px-4 py-3 rounded hover:bg-blue-700 transition-all text-[10px] font-black",children:"Ulo≈æit metadata"}),e.jsx("button",{onClick:()=>U(null),className:"px-4 py-3 border border-gray-200 rounded hover:bg-gray-50 transition-all text-[10px] font-black",children:"Zru≈°it"})]})]})]})})}),e.jsxs(ae,{children:[s&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>B(null),className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6",children:e.jsxs(E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-white rounded p-6 max-w-sm w-full space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(tt,{size:24,className:"text-red-500 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-widest mb-2",children:"Smazat?"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Opravdu chce≈° smazat: ",e.jsx("strong",{children:(ut=u.find(t=>t.id===s))==null?void 0:ut.name}),"?"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>B(null),className:"flex-1 px-4 py-2 border border-gray-200 rounded hover:bg-gray-50 transition-all text-[10px] font-black uppercase",children:"Zru≈°it"}),e.jsx("button",{onClick:()=>a(s),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-all text-[10px] font-black uppercase",children:"Smazat"})]})]})}),Ue&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>be(!1),className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6",children:e.jsxs(E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-white rounded p-6 max-w-sm w-full space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(tt,{size:24,className:"text-red-500 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-widest mb-2",children:"Smazat vybran√©?"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Opravdu chce≈° smazat ",e.jsx("strong",{children:c.size})," vybran√Ωch polo≈æek?"]}),e.jsx("div",{className:"bg-gray-50 rounded p-3 max-h-32 overflow-y-auto text-xs space-y-1 mb-4",children:Array.from(c).map(t=>{const i=u.find(m=>m.id===t);return i?e.jsxs("div",{className:"text-gray-700 truncate",children:["‚Ä¢ ",i.name]},t):null})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>be(!1),className:"flex-1 px-4 py-2 border border-gray-200 rounded hover:bg-gray-50 transition-all text-[10px] font-black uppercase",children:"Zru≈°it"}),e.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-all text-[10px] font-black uppercase",children:"Smazat v≈°echny"})]})]})})]}),e.jsx(ae,{children:k&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(null),className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6",children:e.jsxs(E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-white rounded p-6 max-w-sm w-full space-y-4",children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-widest",children:"P≈ôejmenovat"}),e.jsx("input",{type:"text",value:f,onChange:t=>j(t.target.value),autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&V(k.id,f),t.key==="Escape"&&x(null)},className:"w-full px-4 py-2 border border-gray-200 rounded focus:border-[#007BFF] outline-none text-[11px] font-black uppercase"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 border border-gray-200 rounded hover:bg-gray-50 transition-all text-[10px] font-black uppercase",children:"Zru≈°it"}),e.jsx("button",{onClick:()=>V(k.id,f),className:"flex-1 px-4 py-2 bg-[#007BFF] text-white rounded hover:bg-blue-700 transition-all text-[10px] font-black uppercase",children:"Ulo≈æit"})]})]})})}),e.jsx(ae,{children:I.length>0&&e.jsxs(E.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:`fixed bottom-8 right-8 z-[100] w-96 bg-white shadow-2xl border border-gray-200 rounded overflow-hidden ${N?"h-14":"max-h-[500px]"}`,children:[e.jsxs("div",{className:"bg-black text-white p-4 flex justify-between items-center cursor-pointer hover:bg-gray-900 transition-all",onClick:()=>$(!N),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{size:14,className:`${I.some(t=>t.status==="uploading")?"animate-spin text-[#007BFF]":"text-green-500"}`}),e.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest",children:["Nahr√°v√°n√≠ (",I.length,")"]})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),S([])},className:"p-1 hover:text-red-500 transition-colors",children:e.jsx(ce,{size:16})})]}),!N&&e.jsx("div",{className:"overflow-y-auto max-h-[400px] p-4 space-y-3 bg-white",children:I.map(t=>e.jsxs("div",{className:"space-y-2 border-b border-gray-50 pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-[9px] font-black uppercase truncate text-black pr-4",children:t.fileName}),e.jsx("span",{className:`text-[8px] font-black uppercase ${t.status==="completed"?"text-green-500":t.status==="error"?"text-red-500":"text-[#007BFF]"}`,children:t.status})]}),e.jsx("div",{className:"h-1 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx(E.div,{className:`h-full ${t.status==="completed"?"bg-green-500":t.status==="error"?"bg-red-500":"bg-[#007BFF]"}`,animate:{width:`${t.progress}%`}})}),t.error&&e.jsx("p",{className:"text-[8px] font-bold text-red-500",children:t.error})]},t.id))})]})}),o&&e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{position:"fixed",top:o.y,left:o.x,zIndex:9999},className:"bg-white border border-gray-200 rounded shadow-xl overflow-hidden w-48",onClick:t=>t.stopPropagation(),onContextMenu:t=>t.preventDefault(),children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{const t=u.find(i=>i.id===o.itemId);t&&(x(t),j(t.name)),A(null)},className:"w-full text-left px-4 py-2 text-[10px] font-black uppercase hover:bg-blue-50 flex items-center gap-2 transition-colors",children:[e.jsx(ve,{size:14})," P≈ôejmenovat"]}),((mt=u.find(t=>t.id===o.itemId))==null?void 0:mt.type)!=="folder"&&e.jsxs("button",{onClick:()=>{ee(o.itemId),A(null)},className:"w-full text-left px-4 py-2 text-[10px] font-black uppercase hover:bg-blue-50 flex items-center gap-2 transition-colors",children:[e.jsx(yt,{size:14})," P≈ôesunout do slo≈æky"]}),((gt=u.find(t=>t.id===o.itemId))==null?void 0:gt.type)!=="folder"&&e.jsxs("button",{onClick:()=>{const t=u.find(i=>i.id===o.itemId);t&&(U(t),j(t.name)),A(null)},className:"w-full text-left px-4 py-2 text-[10px] font-black uppercase hover:bg-blue-50 flex items-center gap-2 transition-colors",children:[e.jsx(et,{size:14})," Metadata"]}),e.jsx("div",{className:"h-px bg-gray-200 my-1"}),e.jsxs("button",{onClick:()=>{B(o.itemId),A(null)},className:"w-full text-left px-4 py-2 text-[10px] font-black uppercase text-red-500 hover:bg-red-50 flex items-center gap-2 transition-colors",children:[e.jsx(pe,{size:14})," Smazat"]})]})}),e.jsx(ae,{children:he&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>ee(null),className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6",children:e.jsxs(E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-white rounded-lg p-6 max-w-md w-full space-y-4",children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-widest",children:he==="__select__"?`P≈ôesunout ${c.size} polo≈æek`:"P≈ôesunout do slo≈æky"}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[e.jsxs("button",{onClick:()=>{he==="__select__"?L(null):le(he,null)},className:"w-full text-left px-4 py-2 hover:bg-blue-50 rounded text-[10px] font-black uppercase flex items-center gap-2",children:[e.jsx(ft,{size:14})," Ko≈ôen"]}),u.filter(t=>t.type==="folder").map(t=>e.jsx("button",{onClick:()=>{he==="__select__"?L(t.id):le(he,t.id)},className:"w-full text-left px-4 py-2 pl-8 hover:bg-blue-50 rounded text-[10px] font-black uppercase",children:t.name},t.id))]}),e.jsx("button",{onClick:()=>ee(null),className:"w-full px-4 py-2 border border-gray-200 rounded hover:bg-gray-50 text-[10px] font-black uppercase",children:"Zru≈°it"})]})})}),o&&e.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>A(null),onContextMenu:t=>t.preventDefault()})]})},Na=()=>{const[r,g]=n.useState([]),[D,P]=n.useState(null),[u,z]=n.useState(""),[b,C]=n.useState(!1),[c,d]=n.useState({author:"",text:"",rating:5,platform:"google",date:"",companyUrl:""}),I=l=>{let y="";if(l.date)try{const s=new Date(l.date),_=new Date().getTime()-s.getTime(),U=Math.floor(_/(1e3*60*60*24));U===0?y="dnes":U===1?y="vƒçera":U<7?y=`p≈ôed ${U} dny`:U<30?y=`p≈ôed ${Math.floor(U/7)} t√Ωdny`:U<365?y=`p≈ôed ${Math.floor(U/30)} mƒõs√≠ci`:y=`p≈ôed ${Math.floor(U/365)} lety`}catch{y=l.date||""}return{id:l.id,author:l.author||"Anonymn√≠ klient",text:l.text||l.content||"",rating:typeof l.rating=="number"?l.rating:5,platform:l.platform||l.company||"manual",date:y,companyUrl:l.company_url||l.companyUrl||""}},S=l=>{let y=null;if(l.date)try{const B=new Date(l.date);isNaN(B.getTime())?y=new Date().toISOString():y=B.toISOString()}catch{y=new Date().toISOString()}const s=new Date().toISOString();return{id:l.id,author:l.author,content:l.text,rating:l.rating,company:l.platform,company_url:l.companyUrl||null,date:y,created_at:s,updated_at:s}},N=async()=>{try{localStorage.removeItem("jakub_minka_reviews_initialized"),localStorage.removeItem("jakub_minka_reviews");const l=await ie.collection("reviews").getAll({force:!0});l&&l.length>0?g(l.map(I)):g([])}catch(l){console.error("Error loading reviews:",l),g([])}};n.useEffect(()=>{N()},[]);const $=async l=>{try{const y=S(l);console.log("üíæ Saving review:",y),localStorage.removeItem("jakub_minka_cache_reviews"),localStorage.removeItem("jakub_minka_cache_reviews_ts"),await ie.collection("reviews").save(y),console.log("‚úÖ Review saved successfully"),await new Promise(s=>setTimeout(s,500)),await N(),console.log("üìñ Data reloaded"),window.dispatchEvent(new Event("storage"))}catch(y){throw console.error("‚ùå Error saving review:",y),alert(`Chyba p≈ôi ukl√°d√°n√≠ recenze: ${y}`),y}},k=async l=>{try{console.log("üóëÔ∏è Deleting review:",l),await ie.collection("reviews").delete(l),console.log("‚úÖ Review deleted, reloading..."),await N(),window.dispatchEvent(new Event("storage"))}catch(y){throw console.error("‚ùå Error deleting review:",y),y}},x=async l=>{l.preventDefault();try{const y={id:`review_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,author:c.author||"Anonymn√≠ klient",text:c.text||"",rating:c.rating||5,platform:c.platform||"manual",date:new Date().toISOString(),companyUrl:c.companyUrl||""};await $(y),C(!1),d({author:"",text:"",rating:5,platform:"google",date:"",companyUrl:""})}catch(y){console.error("Error adding review:",y),alert("Chyba p≈ôi p≈ôid√°n√≠ recenze. Zkuste to pros√≠m znovu.")}},f=async l=>{confirm("Opravdu chcete tuto recenzi smazat?")&&await k(l)},j=l=>{P(l.id),d(l)},F=async l=>{l.preventDefault();const y=r.find(s=>s.id===D);y&&(await $({...y,...c}),P(null),d({author:"",text:"",rating:5,platform:"google",date:"",companyUrl:""}))},O=r.filter(l=>l.author.toLowerCase().includes(u.toLowerCase())||l.text.toLowerCase().includes(u.toLowerCase()));return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-sm border border-gray-100 shadow-sm flex flex-wrap items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>C(!0),className:"bg-[#007BFF] text-white px-8 py-3.5 text-[10px] font-black uppercase tracking-[0.2em] flex items-center gap-2 hover:bg-black transition-all shadow-lg shadow-[#007BFF]/20",children:[e.jsx(Se,{size:16})," P≈ôidat recenzi"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Hledat v recenz√≠ch...",value:u,onChange:l=>z(l.target.value),className:"bg-gray-50 border border-gray-100 py-3 pl-12 pr-6 text-xs font-medium focus:outline-none focus:border-[#007BFF] w-64 transition-all"})]})]}),e.jsx("div",{className:"flex items-center gap-4 text-gray-400 text-[10px] font-black uppercase tracking-widest",children:e.jsxs("span",{children:["Celkem ",r.length," referenc√≠"]})})]}),e.jsx(ae,{children:b&&e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white p-10 border border-[#007BFF]/20 shadow-2xl relative",children:[e.jsx("button",{onClick:()=>C(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-black",children:e.jsx(ce,{size:20})}),e.jsxs("h3",{className:"text-xl font-black uppercase tracking-widest mb-8 flex items-center gap-3",children:[e.jsx(Pt,{size:20,className:"text-[#007BFF]"})," Nov√° reference"]}),e.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Jm√©no klienta / Firmy"}),e.jsx("input",{type:"text",value:c.author,onChange:l=>d({...c,author:l.target.value}),required:!0,className:"w-full bg-gray-50 border border-gray-100 p-4 text-sm focus:outline-none focus:border-[#007BFF]",placeholder:"nap≈ô. Jan Nov√°k, ≈†koda Auto"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Odkaz na firmu (voliteln√©)"}),e.jsx("input",{type:"url",value:c.companyUrl,onChange:l=>d({...c,companyUrl:l.target.value}),className:"w-full bg-gray-50 border border-gray-100 p-4 text-sm focus:outline-none focus:border-[#007BFF]",placeholder:"https://www.firma.cz"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Zdroj recenze"}),e.jsxs("select",{value:c.platform,onChange:l=>d({...c,platform:l.target.value}),className:"w-full bg-gray-50 border border-gray-100 p-4 text-sm focus:outline-none focus:border-[#007BFF]",children:[e.jsx("option",{value:"google",children:"Google Maps"}),e.jsx("option",{value:"firmy",children:"Firmy.cz"}),e.jsx("option",{value:"manual",children:"Vlastn√≠ (Ovƒõ≈ôeno)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Datum (nepovinn√©)"}),e.jsx("input",{type:"text",value:c.date,onChange:l=>d({...c,date:l.target.value}),className:"w-full bg-gray-50 border border-gray-100 p-4 text-sm focus:outline-none focus:border-[#007BFF]",placeholder:"nap≈ô. p≈ôed mƒõs√≠cem"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Hodnocen√≠"}),e.jsx("div",{className:"flex gap-2 p-3 bg-gray-50 border border-gray-100",children:[1,2,3,4,5].map(l=>e.jsx("button",{type:"button",onClick:()=>d({...c,rating:l}),className:`transition-colors ${l<=(c.rating||0)?"text-yellow-400":"text-gray-200"}`,children:e.jsx(at,{size:24,fill:"currentColor"})},l))})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Obsah recenze"}),e.jsx("textarea",{rows:4,value:c.text,onChange:l=>d({...c,text:l.target.value}),required:!0,className:"w-full bg-gray-50 border border-gray-100 p-4 text-sm focus:outline-none focus:border-[#007BFF] resize-none",placeholder:"Co klient o spolupr√°ci napsal..."})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-[#007BFF] text-white px-12 py-4 text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all",children:"Ulo≈æit recenzi"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:O.map(l=>e.jsx("div",{className:`bg-white border rounded-sm p-8 transition-all group relative ${D===l.id?"border-[#007BFF] ring-2 ring-[#007BFF]/10":"border-gray-100 hover:shadow-xl hover:border-gray-200"}`,children:D===l.id?e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:c.author,onChange:y=>d({...c,author:y.target.value}),className:"w-full border-b border-gray-200 py-2 focus:outline-none focus:border-[#007BFF] font-bold text-sm"}),e.jsxs("select",{value:c.platform,onChange:y=>d({...c,platform:y.target.value}),className:"w-full border-b border-gray-200 py-2 focus:outline-none focus:border-[#007BFF] text-[10px] font-black uppercase",children:[e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"firmy",children:"Firmy.cz"}),e.jsx("option",{value:"manual",children:"Vlastn√≠"})]})]}),e.jsx("input",{type:"url",value:c.companyUrl,onChange:y=>d({...c,companyUrl:y.target.value}),placeholder:"https://www.firma.cz",className:"w-full border-b border-gray-200 py-2 focus:outline-none focus:border-[#007BFF] text-xs"}),e.jsx("textarea",{value:c.text,onChange:y=>d({...c,text:y.target.value}),className:"w-full bg-gray-50 p-4 text-xs border border-gray-100 focus:outline-none focus:border-[#007BFF] resize-none",rows:3}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>P(null),className:"p-2 text-gray-400 hover:text-red-500",children:e.jsx(ce,{size:18})}),e.jsxs("button",{type:"submit",className:"bg-[#007BFF] text-white px-6 py-2 text-[9px] font-black uppercase tracking-widest",children:[e.jsx(rt,{size:14,className:"inline mr-2"})," Ulo≈æit zmƒõny"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"flex gap-0.5 text-yellow-400",children:[...Array(l.rating)].map((y,s)=>e.jsx(at,{size:12,fill:"currentColor"},s))}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>j(l),className:"p-2 hover:text-[#007BFF] text-gray-300",children:e.jsx(ve,{size:16})}),e.jsx("button",{onClick:()=>f(l.id),className:"p-2 hover:text-red-500 text-gray-300",children:e.jsx(pe,{size:16})})]})]}),e.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed mb-6 italic line-clamp-3",children:['"',l.text,'"']}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-50 pt-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-[10px] uppercase tracking-widest text-gray-900",children:l.author}),e.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase tracking-[0.2em]",children:l.date}),l.companyUrl&&e.jsxs("a",{href:l.companyUrl,target:"_blank",rel:"noreferrer",className:"mt-2 inline-flex items-center gap-2 text-[8px] font-black uppercase tracking-widest text-[#007BFF] hover:text-black",children:[e.jsx(Ze,{size:10})," Web firmy"]})]}),e.jsx("div",{className:"bg-gray-50 px-3 py-1 rounded-full",children:e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-[#007BFF]",children:l.platform==="google"?"Google":l.platform==="firmy"?"Firmy.cz":"Vlastn√≠"})})]})]})},l.id))}),O.length===0&&e.jsxs("div",{className:"py-32 bg-white border border-gray-100 border-dashed rounded-sm flex flex-col items-center justify-center text-center",children:[e.jsx(tt,{size:40,className:"text-gray-100 mb-4"}),e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-400",children:"≈Ω√°dn√© recenze nenalezeny"})]})]})},Ut=({isOpen:r,onClose:g,onSelect:D,onMultiSelect:P,allowMultiple:u=!1,allowUpload:z=!0,showFolders:b=!0})=>{var v;const[C,c]=n.useState([]),[d,I]=n.useState(null),[S,N]=n.useState(new Set),[$,k]=n.useState([]),[x,f]=n.useState(!1),j=n.useRef(null),F=parseFloat(localStorage.getItem("jakub_minka_compression_quality")||"0.8");n.useEffect(()=>{r&&O()},[r]);const O=async()=>{try{const o=await X.getAll({force:!0});c(o.map(A=>({...A,parentId:A.parentId||null})))}catch(o){console.error("Error loading items:",o)}},l=C.filter(o=>d?o.parentId===d:!o.parentId),y=l.filter(o=>o.type==="folder"),s=l.filter(o=>o.type!=="folder"),B=o=>{switch(o){case"image":return e.jsx(De,{size:12});case"video":return e.jsx(Ge,{size:12});case"folder":return e.jsx(Re,{size:12});default:return e.jsx(Je,{size:12})}},_=async o=>{var ke;const A=o.target.files;if(!A||A.length===0)return;f(!0);const se=Array.from(A);for(const q of se){const Ne=q.name.split(".")[0];if(C.find(G=>G.name===Ne&&G.type!=="folder")){const G=Math.random().toString(36).substr(2,9);k(ue=>[...ue,{id:G,fileName:q.name,progress:0,status:"error",error:`Soubor "${q.name}" ji≈æ existuje`}]);continue}const ee=Math.random().toString(36).substr(2,9);k(G=>[{id:ee,fileName:q.name,progress:0,status:q.type.startsWith("image/")?"optimizing":"uploading"},...G]);try{let G=q;const ue=ee+"_"+q.name.replace(/\s+/g,"_").toLowerCase();if(q.type.startsWith("image/"))try{G=await It(q,F)}catch(oe){console.warn("Image optimization failed:",oe)}const{error:re}=await Fe.storage.from("media").upload(ue,G,{upsert:!1});if(re)throw re;k(oe=>oe.map(W=>W.id===ee?{...W,status:"uploading",progress:50}:W));const Ue=((ke=Fe.storage.from("media").getPublicUrl(ue).data)==null?void 0:ke.publicUrl)||"",be={id:ee,name:q.name.split(".")[0],type:q.type.startsWith("image")?"image":q.type.startsWith("video")?"video":"other",size:`${(G.size/(1024*1024)).toFixed(2)} MB`,url:Ue,parentId:d,specializationId:ue,updatedAt:new Date().toISOString()};await X.save(be),k(oe=>oe.map(W=>W.id===ee?{...W,status:"completed",progress:100}:W)),await O()}catch(G){k(ue=>ue.map(re=>re.id===ee?{...re,status:"error",error:G.message||"Upload failed"}:re))}}j.current&&(j.current.value=""),f(!1)},U=o=>{o.type==="folder"?I(o.id):u?N(A=>{const se=new Set(A);return se.has(o.id)?se.delete(o.id):se.add(o.id),se}):(D(o),g())},h=()=>{if(P){const o=C.filter(A=>S.has(A.id));P(o),g()}};return r?e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:g,className:"fixed inset-0 z-[2000] bg-black/95 flex items-center justify-center p-4",children:e.jsxs(E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:o=>o.stopPropagation(),className:"bg-white rounded-lg overflow-hidden w-full max-w-5xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gray-50 border-b p-6 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black uppercase tracking-widest",children:"Knihovna m√©di√≠"}),e.jsxs("p",{className:"text-[10px] text-gray-500 uppercase mt-1",children:[d?"üìÅ V otev≈ôen√© slo≈æce":"üè† Ko≈ôenov√° slo≈æka",u&&` ‚Ä¢ Vybr√°ny: ${S.size}`]})]}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-200 rounded",children:e.jsx(ce,{size:24})})]}),d&&e.jsxs("div",{className:"bg-gray-100 px-6 py-2 flex items-center gap-2 text-[10px] font-black uppercase text-gray-600 border-b",children:[e.jsx("button",{onClick:()=>I(null),className:"hover:text-[#007BFF]",children:"üè† Ko≈ôen"}),e.jsx(Oe,{size:12}),e.jsx("span",{className:"text-[#007BFF]",children:((v=C.find(o=>o.id===d))==null?void 0:v.name)||"Slo≈æka"})]}),z&&e.jsxs("div",{className:"bg-blue-50 border-b px-6 py-4",children:[e.jsxs("button",{onClick:()=>{var o;return(o=j.current)==null?void 0:o.click()},disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-[#007BFF] text-white rounded hover:bg-blue-700 disabled:opacity-50 text-[10px] font-black uppercase",children:[e.jsx(st,{size:14})," Nahr√°t soubory"]}),e.jsx("input",{type:"file",ref:j,onChange:_,multiple:!0,accept:"image/*,video/*",className:"hidden"})]}),e.jsx(ae,{children:$.length>0&&e.jsx("div",{className:"bg-gray-50 border-b px-6 py-4 space-y-2 max-h-24 overflow-y-auto",children:$.map(o=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[e.jsx("span",{className:"font-bold uppercase truncate",children:o.fileName}),e.jsx("span",{className:`font-black px-2 py-0.5 rounded ${o.status==="completed"?"bg-green-100 text-green-700":o.status==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:o.status==="completed"?"‚úì":o.status==="error"?"‚úó":`${o.progress}%`})]}),o.error&&e.jsx("p",{className:"text-[8px] text-red-600",children:o.error}),e.jsx("div",{className:"w-full h-1 bg-gray-200 rounded overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#007BFF] transition-all",style:{width:`${o.progress}%`}})})]},o.id))})}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:y.length===0&&s.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-center",children:e.jsxs("div",{children:[e.jsx(Dt,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-[12px] font-black uppercase",children:"Pr√°zdn√° slo≈æka"}),z&&e.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"P≈ôidej fotky nebo videa pomoc√≠ tlaƒç√≠tka Nahr√°t"})]})}):e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[y.map(o=>e.jsxs("button",{onClick:()=>U(o),className:"group relative aspect-square border-2 border-gray-200 rounded hover:border-[#007BFF] transition-all overflow-hidden bg-gray-50 flex flex-col items-center justify-center gap-2",children:[e.jsx(Re,{size:24,className:"text-blue-500"}),e.jsx("span",{className:"text-[8px] font-black uppercase text-center px-1 truncate",children:o.name}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(Oe,{size:20,className:"text-white"})})]},o.id)),s.map(o=>e.jsxs("button",{onClick:()=>U(o),className:`group relative aspect-square border-2 rounded transition-all overflow-hidden bg-gray-50 flex items-center justify-center ${S.has(o.id)?"border-[#007BFF] bg-blue-50":"border-gray-200 hover:border-[#007BFF]"}`,children:[o.type==="image"&&o.url?e.jsx("img",{src:o.url,alt:o.name,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all"}):e.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-400",children:[B(o.type),e.jsx("span",{className:"text-[8px] uppercase font-black",children:o.type})]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:e.jsx("span",{className:"text-white text-[10px] font-black uppercase",children:u&&S.has(o.id)?"‚úì":"Vybrat"})}),u&&S.has(o.id)&&e.jsx("div",{className:"absolute top-2 right-2 bg-[#007BFF] text-white rounded-full p-1",children:"‚úì"})]},o.id))]})}),u&&e.jsxs("div",{className:"bg-gray-50 border-t px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:g,className:"px-6 py-2 border border-gray-300 rounded hover:bg-gray-100 text-[10px] font-black uppercase transition-all",children:"Zru≈°it"}),e.jsxs("button",{onClick:h,disabled:S.size===0,className:"px-6 py-2 bg-[#007BFF] text-white rounded hover:bg-blue-700 disabled:opacity-50 text-[10px] font-black uppercase transition-all",children:["Vybrat (",S.size,")"]})]})]})}):null},wa=()=>{const[r,g]=n.useState([]),[D,P]=n.useState(!1),[u,z]=n.useState(null),[b,C]=n.useState(""),[c,d]=n.useState(!1),[I,S]=n.useState([]),[N,$]=n.useState("grid"),[k,x]=n.useState("date"),[f,j]=n.useState("all"),[F,O]=n.useState([]),[l,y]=n.useState(!1),[s,B]=n.useState("gallery"),[_,U]=n.useState(new Set),h=n.useRef(null),[v,o]=n.useState({title:"",shortDescription:"",description:"",categoryId:ze[0].id,type:Be.BOTH,date:new Date().toISOString().split("T")[0],thumbnailUrl:"",thumbnailSource:"pc",gallery:[],servicesDelivered:"",youtubeUrl:"",websiteUrl:"",websiteLabel:"",youtubeCoverUrl:""}),[A,se]=n.useState([]);n.useEffect(()=>{(async()=>{const p=await Ae.getAll({force:!0});g(p);const L=await X.getAll({force:!0});O(L)})()},[]);const ke=async(a,p=.8)=>new Promise(L=>{if(!a.type.startsWith("image/")){L(a);return}const T=new FileReader;T.readAsDataURL(a),T.onload=J=>{var M;const R=new Image;R.src=(M=J.target)==null?void 0:M.result,R.onload=()=>{const V=document.createElement("canvas");let le=R.width,Y=R.height;const te=2e3;le>te&&(Y=te/le*Y,le=te),V.width=le,V.height=Y;const Q=V.getContext("2d");Q==null||Q.drawImage(R,0,0,le,Y),V.toBlob(H=>L(H||a),"image/webp",p)}}}),q=async(a,p)=>{const L="m-"+Math.random().toString(36).substr(2,9),T=p.replace(/[^a-zA-Z0-9._-]/g,"_").replace(/\.[^/.]+$/,".webp"),J=`uploads/${L}_${T}`,{error:R}=await Fe.storage.from("media").upload(J,a,{cacheControl:"3600",upsert:!0});if(R)throw R;const{data:M}=Fe.storage.from("media").getPublicUrl(J);return M.publicUrl},Ne=async a=>{var R;if(!((R=a.target.files)!=null&&R.length))return;const p=Array.from(a.target.files),L=[],T=[];for(const M of p){const V=M.name.split(".")[0];F.some(Y=>Y.name===V&&Y.type!=="folder")?L.push(M.name):T.push(M)}if(L.length>0&&alert(`‚ùå N√°sleduj√≠c√≠ soubory ji≈æ existuj√≠ v syst√©mu:
${L.join(`
`)}

Duplicitn√≠ soubory nejsou povoleny.`),T.length===0)return;d(!0);const J=parseFloat(localStorage.getItem("jakub_minka_compression_quality")||"0.8");for(const M of T){const V=Math.random().toString(36).substr(2,9),le=M.name.split(".")[0];S(Y=>[...Y,{id:V,name:M.name,progress:0}]);try{const Y=await ke(M,J),te=await q(Y,M.name),Q={id:"m-"+V,name:le,type:"image",size:`${(M.size/(1024*1024)).toFixed(2)} MB`,url:te,parentId:null,specializationId:"",updatedAt:new Date().toISOString()};await X.save(Q),console.log("‚úÖ Gallery image added to media gallery:",Q.name);const H={id:"g-"+V,url:te,type:"image",source:"storage"};o(Te=>({...Te,gallery:[...Te.gallery||[],H]})),S(Te=>Te.filter(Ke=>Ke.id!==V))}catch(Y){console.error("Gallery upload error:",Y),S(te=>te.filter(Q=>Q.id!==V))}}d(!1)},he=a=>{s==="youtubeCover"&&o(p=>({...p,youtubeCoverUrl:a.url})),y(!1)},ee=a=>{const p=(v.gallery||[]).map(J=>J.url),L=[],T=[];if(a.forEach(J=>{p.includes(J.url)?L.push(J.name):T.push(J)}),L.length>0&&alert(`‚ùå N√°sleduj√≠c√≠ polo≈æky ji≈æ jsou v galerii projektu:
${L.join(`
`)}

Nebudou p≈ôid√°ny.`),T.length>0){const J=T.map(R=>({id:R.id,url:R.url,type:R.type,source:"storage"}));o(R=>({...R,gallery:[...R.gallery||[],...J]}))}y(!1)},G=a=>{o(p=>({...p,gallery:(p.gallery||[]).filter((L,T)=>T!==a)}))},ue=a=>{h.current=a},re=a=>{a.preventDefault()},He=a=>{if(h.current===null)return;const p=[...v.gallery||[]],[L]=p.splice(h.current,1);p.splice(a,0,L),o(T=>({...T,gallery:p})),h.current=null},Ue=async a=>{var T,J,R;if(a.preventDefault(),!((T=v.title)!=null&&T.trim())){alert("Zadejte n√°zev projektu");return}let p=v.thumbnailUrl||"";const L=(v.gallery||[]).filter(M=>M.type==="image");if(!p&&L.length>0){const M=L[Math.floor(Math.random()*L.length)];p=M.url,console.log("üé≤ Auto-selected random thumbnail from gallery:",M.url)}else if(!p&&L.length===0&&A.length>0){const V=(J=A[0].match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/))==null?void 0:J[1];V&&(p=`https://img.youtube.com/vi/${V}/maxresdefault.jpg`,console.log("üé¨ Auto-selected YouTube thumbnail:",p))}d(!0);try{const M=A.filter(te=>te.trim()).map(te=>({id:"yt-"+Math.random().toString(36).substr(2,9),type:"video",url:te.trim(),source:"youtube"})),V=[...v.gallery||[],...M],le={id:u||"p-"+Math.random().toString(36).substr(2,9),title:v.title,shortDescription:v.shortDescription||"",description:v.description||"",category:((R=ze.find(te=>te.id===v.categoryId))==null?void 0:R.name)||"Ostatn√≠",categoryId:v.categoryId,type:v.type||Be.BOTH,date:v.date||new Date().toISOString(),thumbnailUrl:p,thumbnailSource:"storage",gallery:V,servicesDelivered:v.servicesDelivered||"",websiteUrl:v.websiteUrl||"",websiteLabel:v.websiteLabel||"",youtubeCoverUrl:v.youtubeCoverUrl||"",youtubeUrl:""};await Ae.save(le),console.log("Project saved, reloading list...");const Y=await Ae.getAll({force:!0});console.log("Projects loaded:",Y),g(Y),P(!1),be()}catch(M){let V="Nezn√°m√° chyba";M instanceof Error?V=M.message:typeof M=="object"&&M!==null?V=JSON.stringify(M):V=String(M),console.error("Save error:",M),alert("Chyba p≈ôi ukl√°d√°n√≠: "+V)}finally{d(!1)}},be=()=>{z(null),o({title:"",shortDescription:"",description:"",categoryId:ze[0].id,type:Be.BOTH,date:new Date().toISOString().split("T")[0],thumbnailUrl:"",thumbnailSource:"pc",gallery:[],servicesDelivered:"",websiteUrl:"",websiteLabel:"",youtubeCoverUrl:""}),se([])},oe=a=>{z(a.id);const p=(a.gallery||[]).filter(T=>T.source==="youtube"),L=(a.gallery||[]).filter(T=>T.source!=="youtube");se(p.map(T=>T.url)),o({...a,gallery:L}),P(!0)},W=async a=>{if(confirm("Smazat projekt?"))try{await Ae.delete(a);const p=await Ae.getAll({force:!0});g(p)}catch(p){console.error("Delete error:",p),alert("Error deleting project")}},Ce=r.filter(a=>{var p;return(a.title.toLowerCase().includes(b.toLowerCase())||((p=a.shortDescription)==null?void 0:p.toLowerCase().includes(b.toLowerCase())))&&(f==="all"||a.categoryId===f)}).sort((a,p)=>k==="date"?new Date(p.date).getTime()-new Date(a.date).getTime():k==="title"?a.title.localeCompare(p.title):k==="category"?a.category.localeCompare(p.category):0);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 border shadow-sm space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>{be(),P(!0)},className:"bg-[#007BFF] text-white px-8 py-3.5 text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all",children:[e.jsx(Se,{className:"inline mr-2",size:16})," P≈òIDAT ZAK√ÅZKU"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"HLEDAT...",value:b,onChange:a=>C(a.target.value),className:"pl-12 pr-6 py-3 border text-[10px] font-black w-64 uppercase bg-white text-black"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$("grid"),className:`p-2 rounded ${N==="grid"?"bg-[#007BFF] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"M≈ô√≠≈æka",children:e.jsx(Bt,{size:18})}),e.jsx("button",{onClick:()=>$("list"),className:`p-2 rounded ${N==="list"?"bg-[#007BFF] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Seznam",children:e.jsx(We,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{size:16,className:"text-gray-400"}),e.jsxs("select",{value:f,onChange:a=>j(a.target.value),className:"border px-3 py-2 text-[10px] font-black uppercase bg-white text-black rounded",children:[e.jsx("option",{value:"all",children:"V≈°echny kategorie"}),ze.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{size:16,className:"text-gray-400"}),e.jsxs("select",{value:k,onChange:a=>x(a.target.value),className:"border px-3 py-2 text-[10px] font-black uppercase bg-white text-black rounded",children:[e.jsx("option",{value:"date",children:"Datum (nejnovƒõj≈°√≠)"}),e.jsx("option",{value:"title",children:"N√°zev (A-Z)"}),e.jsx("option",{value:"category",children:"Kategorie"})]})]}),e.jsxs("div",{className:"ml-auto text-[10px] font-black uppercase text-gray-400 tracking-widest",children:[Ce.length," / ",r.length," zak√°zek"]})]})]}),e.jsx(ae,{children:D&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:()=>P(!1),children:e.jsxs(E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-sm shadow-2xl",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-black text-white p-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-black uppercase",children:u?"Upravit zak√°zku":"Nov√° zak√°zka"}),e.jsx("button",{onClick:()=>P(!1),className:"hover:text-red-500",children:e.jsx(ce,{size:24})})]}),e.jsxs("form",{onSubmit:Ue,className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"N√°zev projektu *"}),e.jsx("input",{type:"text",value:v.title||"",onChange:a=>o(p=>({...p,title:a.target.value})),required:!0,placeholder:"Vynikaj√≠c√≠ projekt",className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Datum projektu"}),e.jsx("input",{type:"date",value:v.date||"",onChange:a=>o(p=>({...p,date:a.target.value})),className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Specializace"}),e.jsx("select",{value:v.categoryId||ze[0].id,onChange:a=>o(p=>({...p,categoryId:a.target.value})),className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]",children:ze.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Typ m√©dia"}),e.jsxs("select",{value:v.type||Be.BOTH,onChange:a=>o(p=>({...p,type:a.target.value})),className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]",children:[e.jsx("option",{value:Be.BOTH,children:"Obr√°zky a video"}),e.jsx("option",{value:Be.IMAGE,children:"Jen obr√°zky"}),e.jsx("option",{value:Be.VIDEO,children:"Jen video"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Kr√°tk√Ω popis"}),e.jsx("input",{type:"text",value:v.shortDescription||"",onChange:a=>o(p=>({...p,shortDescription:a.target.value})),placeholder:"Jeden ≈ô√°dek popisu",className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Popis projektu"}),e.jsx("textarea",{value:v.description||"",onChange:a=>o(p=>({...p,description:a.target.value})),placeholder:"Detailn√≠ popis projektu...",rows:6,className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF] resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Poskytnut√© slu≈æby"}),e.jsx("input",{type:"text",value:v.servicesDelivered||"",onChange:a=>o(p=>({...p,servicesDelivered:a.target.value})),placeholder:"Fotografie, editace, produkce, atd...",className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Odkaz na web klienta (voliteln√©)"}),e.jsx("input",{type:"url",value:v.websiteUrl||"",onChange:a=>o(p=>({...p,websiteUrl:a.target.value})),placeholder:"https://www.klient.cz",className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Text tlaƒç√≠tka (voliteln√©)"}),e.jsx("input",{type:"text",value:v.websiteLabel||"",onChange:a=>o(p=>({...p,websiteLabel:a.target.value})),placeholder:"Nav≈°t√≠vit web",className:"w-full border-2 border-gray-200 p-4 font-bold text-black outline-none focus:border-[#007BFF]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"YouTube videa (voliteln√©)"}),e.jsxs("button",{type:"button",onClick:()=>se([...A,""]),className:"bg-[#007BFF] text-white px-3 py-1 text-[8px] font-black uppercase rounded hover:bg-blue-700 flex items-center gap-1",children:[e.jsx(Se,{size:12})," P≈ôidat video"]})]}),e.jsxs("div",{className:"space-y-2",children:[A.length===0&&e.jsx("p",{className:"text-xs text-gray-400 italic",children:"≈Ω√°dn√° YouTube videa"}),A.map((a,p)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:a,onChange:L=>{const T=[...A];T[p]=L.target.value,se(T)},placeholder:"https://www.youtube.com/watch?v=...",className:"flex-1 border-2 border-gray-200 p-3 font-bold text-sm text-black outline-none focus:border-[#007BFF]"}),e.jsx("button",{type:"button",onClick:()=>se(A.filter((L,T)=>T!==p)),className:"px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-all",title:"Odebrat",children:e.jsx(ce,{size:16})})]},p))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Vlastni cover pro YouTube (volitelne)"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"url",value:v.youtubeCoverUrl||"",onChange:a=>o(p=>({...p,youtubeCoverUrl:a.target.value})),placeholder:"https://...",className:"flex-1 border-2 border-gray-200 p-3 font-bold text-sm text-black outline-none focus:border-[#007BFF]"}),e.jsx("button",{type:"button",onClick:()=>{B("youtubeCover"),y(!0)},className:"border-2 border-[#007BFF] text-[#007BFF] px-4 py-2 text-[10px] font-black uppercase hover:bg-blue-50",children:"Vybrat"})]})]}),e.jsxs("div",{className:"border-t pt-8",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest mb-4 flex items-center gap-2",children:["Galerie projekt≈Ø",e.jsx("span",{className:"text-xs text-gray-400 font-normal",children:"(N√°hodn√Ω obr√°zek bude automaticky pou≈æit jako thumbnail)"})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("button",{type:"button",onClick:()=>{const a=document.createElement("input");a.type="file",a.multiple=!0,a.accept="image/*,video/*",a.onchange=p=>{Ne({target:{files:p.target.files}})},a.click()},className:"bg-[#007BFF] text-white px-6 py-2 text-[10px] font-black uppercase hover:bg-black transition-all",children:[e.jsx(st,{size:14,className:"inline mr-2"})," P≈ôidat soubory"]}),e.jsx("button",{type:"button",onClick:()=>{B("gallery"),y(!0)},className:"border-2 border-[#007BFF] text-[#007BFF] px-6 py-2 text-[10px] font-black uppercase hover:bg-blue-50",children:"üìö Z knihovny"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:(v.gallery||[]).map((a,p)=>e.jsxs(E.div,{draggable:!0,onDragStart:()=>ue(p),onDragOver:re,onDrop:()=>He(p),className:"relative group cursor-move border-2 border-dashed border-gray-300 rounded overflow-hidden aspect-square bg-gray-50",children:[a.type==="image"?e.jsx("img",{src:a.url,alt:"Gallery",className:"w-full h-full object-cover"}):e.jsx("video",{src:a.url,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all flex items-center justify-center gap-2",children:[e.jsx(Zt,{size:16,className:"text-white opacity-0 group-hover:opacity-100"}),e.jsx("button",{type:"button",onClick:()=>G(p),className:"bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 hover:bg-red-600",children:e.jsx(pe,{size:12})})]})]},p))}),I.length>0&&e.jsx("div",{className:"mt-6 space-y-2",children:I.map(a=>e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black uppercase text-gray-500",children:a.name}),e.jsx("div",{className:"h-1 bg-gray-200 rounded overflow-hidden",children:e.jsx(E.div,{className:"h-full bg-[#007BFF]",animate:{width:`${a.progress}%`}})})]},a.id))})]}),e.jsxs("div",{className:"flex gap-4 pt-8 border-t",children:[e.jsxs("button",{type:"submit",disabled:c,className:"flex-1 bg-black text-white py-4 text-[10px] font-black uppercase hover:bg-[#007BFF] disabled:bg-gray-400",children:[c?e.jsx(Qe,{className:"animate-spin inline mr-2",size:16}):"‚úì","ULO≈ΩIT PROJEKT"]}),e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-8 py-4 border-2 border-gray-200 text-[10px] font-black uppercase hover:border-red-500 text-gray-600 hover:text-red-500",children:"Zru≈°it"})]})]})]})})}),e.jsx(Ut,{isOpen:l,onClose:()=>y(!1),onSelect:he,onMultiSelect:s==="gallery"?ee:void 0,allowMultiple:s==="gallery",allowUpload:!0,showFolders:!0}),N==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Ce.length===0?e.jsx("div",{className:"col-span-full text-center py-20 text-gray-400",children:e.jsx("p",{className:"text-[12px] font-black uppercase tracking-widest",children:"≈Ω√°dn√© projekty"})}):Ce.map(a=>{var p;return e.jsxs(E.div,{layout:!0,className:"bg-white border border-gray-200 rounded overflow-hidden group hover:shadow-xl transition-all",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative overflow-hidden",children:[a.thumbnailUrl?e.jsx("img",{src:a.thumbnailUrl,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 text-sm",children:"Bez obr√°zku"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{onClick:()=>oe(a),className:"p-2 bg-white/90 hover:bg-[#007BFF] hover:text-white rounded shadow-lg transition-all",title:"Upravit",children:e.jsx(ve,{size:14})}),e.jsx("button",{onClick:()=>W(a.id),className:"p-2 bg-white/90 hover:bg-red-500 hover:text-white rounded shadow-lg transition-all",title:"Smazat",children:e.jsx(pe,{size:14})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-wider mb-1 line-clamp-1",children:a.title}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2",children:a.category}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-3",children:a.shortDescription||((p=a.description)==null?void 0:p.substring(0,80))}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-gray-400 uppercase tracking-widest",children:[e.jsx("span",{children:new Date(a.date).toLocaleDateString("cs-CZ")}),a.gallery&&e.jsxs("span",{children:["üì∏ ",a.gallery.length]})]})]})]},a.id)})}):e.jsx("div",{className:"space-y-4",children:Ce.length===0?e.jsx("div",{className:"text-center py-20 text-gray-400",children:e.jsx("p",{className:"text-[12px] font-black uppercase tracking-widest",children:"≈Ω√°dn√© projekty"})}):Ce.map(a=>{var p;return e.jsxs(E.div,{layout:!0,className:"bg-white border border-gray-200 p-6 flex gap-6 items-start hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"w-24 h-24 rounded overflow-hidden flex-shrink-0 bg-gray-100",children:a.thumbnailUrl?e.jsx("img",{src:a.thumbnailUrl,alt:a.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 text-xs",children:"Bez obr√°zku"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-widest mb-1",children:a.title}),e.jsxs("p",{className:"text-[11px] text-gray-500 uppercase tracking-widest mb-2",children:[a.category," ‚Ä¢ ",new Date(a.date).toLocaleDateString("cs-CZ")]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.shortDescription||((p=a.description)==null?void 0:p.substring(0,100))}),a.gallery&&e.jsxs("p",{className:"text-[10px] text-gray-400 mt-2",children:["üì∏ ",a.gallery.length," polo≈æek v galerii"]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>oe(a),className:"p-2 hover:bg-blue-100 rounded text-[#007BFF]",title:"Upravit",children:e.jsx(ve,{size:18})}),e.jsx("button",{onClick:()=>W(a.id),className:"p-2 hover:bg-red-100 rounded text-red-500",title:"Smazat",children:e.jsx(pe,{size:18})})]})]},a.id)})})]})},za=({content:r,coverImage:g,title:D,onContentChange:P,onMediaClick:u})=>{const z=n.useRef(null),b=(c,d="")=>{if(!z.current)return;const I=z.current.selectionStart,S=z.current.selectionEnd,N=r.substring(I,S)||"text",$=r.substring(0,I)+c+N+d+r.substring(S);P($),setTimeout(()=>{var k,x;(k=z.current)==null||k.focus(),(x=z.current)==null||x.setSelectionRange(I+c.length,I+c.length+N.length)},0)},C=c=>{let d=c;return d=d.replace(/```[\s\S]*?```/g,I=>`<pre class="bg-gray-900 text-gray-100 p-4 rounded font-mono text-sm overflow-auto my-4">${I.replace(/```/g,"")}</pre>`),d=d.replace(/`([^`]+)`/g,'<code class="bg-gray-100 px-2 py-1 rounded font-mono text-sm">$1</code>'),d=d.replace(/!\[([^\]]*)\]\(([^\)]+)\)/g,'<img src="$2" alt="$1" class="max-w-full h-auto rounded my-4" />'),d=d.replace(/<video[^>]*src="([^"]+)"[^>]*><\/video>/g,'<div class="my-4 rounded overflow-hidden"><video src="$1" controls class="w-full" /></div>'),d=d.replace(/(^[\*\-] .+$(\n[\*\-] .+$)*)/gm,I=>`<ul class="list-disc my-2">${I.split(`
`).map(N=>N.replace(/^[\*\-] /,"").trim().replace(/\*\*\*([^\*]+)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/\*\*([^\*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^\*]+)\*/g,"<em>$1</em>").replace(/_([^_]+)_/g,"<em>$1</em>")).map(N=>`<li class="ml-6">${N}</li>`).join("")}</ul>`),d=d.replace(/(^> .+$(\n> .+$)*)/gm,I=>`<blockquote class="border-l-4 border-[#007BFF] pl-4 italic text-gray-600 my-2">${I.split(`
`).map(N=>N.replace(/^> /,"").trim()).join("<br />")}</blockquote>`),d=d.replace(/^### (.*?)$/gm,'<h3 class="text-lg font-black uppercase tracking-widest mt-6 mb-2">$1</h3>'),d=d.replace(/^## (.*?)$/gm,'<h2 class="text-2xl font-black uppercase tracking-widest mt-8 mb-3">$1</h2>'),d=d.replace(/^# (.*?)$/gm,'<h1 class="text-4xl font-black uppercase tracking-widest mt-10 mb-4">$1</h1>'),d=d.replace(/\*\*\*([^\*]+)\*\*\*/g,"<strong><em>$1</em></strong>"),d=d.replace(/\*\*([^\*]+)\*\*/g,"<strong>$1</strong>"),d=d.replace(/\*([^\*]+)\*/g,"<em>$1</em>"),d=d.replace(/_([^_]+)_/g,"<em>$1</em>"),d=d.replace(/\[([^\]]+)\]\(([^\)]+)\)/g,'<a href="$2" class="text-[#007BFF] hover:underline" target="_blank">$1</a>'),d=d.split(`

`).map(I=>I.match(/<(h[1-6]|ul|blockquote|pre|img|video)/)?I:`<p class="my-3 leading-relaxed">${I}</p>`).join(""),d};return e.jsxs("div",{className:"flex gap-4 h-full min-h-[600px]",children:[e.jsxs("div",{className:"flex-1 flex flex-col bg-white border border-gray-200 rounded",children:[e.jsxs("div",{className:"bg-gray-50 border-b p-3 flex flex-wrap gap-2 items-center",children:[e.jsxs("div",{className:"flex gap-1 border-r pr-3",children:[e.jsx("button",{type:"button",onClick:()=>b("**","**"),title:"Tuƒçn√Ω text",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(Tt,{size:16})}),e.jsx("button",{type:"button",onClick:()=>b("*","*"),title:"Kurz√≠va",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(Mt,{size:16})})]}),e.jsxs("div",{className:"flex gap-1 border-r pr-3",children:[e.jsx("button",{type:"button",onClick:()=>b("# "),title:"Nadpis H1",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black text-sm font-black",children:"H1"}),e.jsx("button",{type:"button",onClick:()=>b("## "),title:"Nadpis H2",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black text-sm font-black",children:"H2"}),e.jsx("button",{type:"button",onClick:()=>b("### "),title:"Nadpis H3",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black text-sm font-black",children:"H3"})]}),e.jsxs("div",{className:"flex gap-1 border-r pr-3",children:[e.jsx("button",{type:"button",onClick:()=>b("* "),title:"Seznam",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(We,{size:16})}),e.jsx("button",{type:"button",onClick:()=>b("> "),title:"Citace",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(qt,{size:16})})]}),e.jsxs("div",{className:"flex gap-1 border-r pr-3",children:[e.jsx("button",{type:"button",onClick:()=>b("[","](url)"),title:"Odkaz",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(Gt,{size:16})}),e.jsx("button",{type:"button",onClick:u,title:"Vlo≈æit fotku",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(De,{size:16})}),e.jsx("button",{type:"button",onClick:u,title:"Vlo≈æit video",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(Ge,{size:16})})]}),e.jsx("div",{className:"flex gap-1",children:e.jsx("button",{type:"button",onClick:()=>b("```\n","\n```"),title:"K√≥d",className:"p-2 hover:bg-gray-200 rounded transition-all text-gray-700 hover:text-black",children:e.jsx(Jt,{size:16})})}),e.jsx("div",{className:"flex-1"}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"üí° Markdown editor"})]}),e.jsx("textarea",{ref:z,value:r,onChange:c=>P(c.target.value),id:"editor-content",className:"flex-1 p-4 resize-none font-mono text-sm border-0 focus:outline-none focus:ring-0",placeholder:"Napi≈° obsah ƒçl√°nku... (Markdown syntaxe)",spellCheck:"true"}),e.jsxs("div",{className:"bg-gray-50 border-t p-3 text-[10px] text-gray-500 uppercase",children:["üìù ",r.length," znak≈Ø ‚Ä¢ ",Math.ceil(r.split(/\s+/).length)," slov"]})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white border border-gray-200 rounded overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b p-3 text-[10px] font-black uppercase text-gray-700",children:"üëÅÔ∏è N√°hled"}),e.jsxs("div",{className:"flex-1 overflow-auto p-6 prose prose-sm max-w-none",children:[g&&e.jsx("img",{src:g,alt:"Cover",className:"w-full h-48 object-cover rounded mb-6"}),D&&e.jsx("h1",{className:"text-4xl font-black uppercase tracking-widest mb-4",children:D}),e.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:C(r)}}),!r&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:e.jsx("p",{className:"text-[12px] font-black uppercase",children:"N√°hled se objev√≠ zde..."})})]}),e.jsx("div",{className:"bg-gray-50 border-t p-3 text-[10px] text-gray-500 uppercase text-center",children:"Jak bude ƒçl√°nek vypadat"})]})]})},Fa=()=>{var _,U;const[r,g]=n.useState([]),[D,P]=n.useState(!1),[u,z]=n.useState(null),[b,C]=n.useState(""),[c,d]=n.useState(!1),[I,S]=n.useState(!1),[N,$]=n.useState([]),[k,x]=n.useState({title:"",excerpt:"",content:"",coverImage:"",date:new Date().toISOString().split("T")[0],author:"Jakub Minka",tags:[]}),[f,j]=n.useState(""),F=async()=>{try{const h=await Xe.getAll({force:!0});g(h);const v=await X.getAll({force:!0});$(v.filter(o=>o.type!=="folder"))}catch(h){console.error("Load error:",h)}};n.useEffect(()=>{F()},[]),n.useEffect(()=>{if(u){const h=r.find(v=>v.id===u);h&&(x({title:h.title,excerpt:h.excerpt,content:h.content,coverImage:h.coverImage,date:new Date(h.date).toISOString().split("T")[0],author:h.author,tags:h.tags}),j(h.content))}},[u]);const O=async h=>{var v;if(h.preventDefault(),!((v=k.title)!=null&&v.trim())||!f.trim()){alert("Vypl≈à n√°zev a obsah ƒçl√°nku");return}d(!0);try{const o={id:u||"b-"+Math.random().toString(36).substr(2,9),title:k.title,excerpt:k.excerpt||"",content:f,coverImage:k.coverImage||"",date:u?new Date().toISOString():new Date(k.date||new Date).toISOString(),author:k.author||"Jakub Minka",tags:k.tags||[]};console.log("Saving blog post:",o),await Xe.save(o),await F(),P(!1),z(null),x({title:"",excerpt:"",content:"",coverImage:"",date:new Date().toISOString().split("T")[0],author:"Jakub Minka",tags:[]}),j(""),alert("‚úì ƒål√°nek ulo≈æen")}catch(o){console.error("Full error:",o);const A=o instanceof Error?o.message:JSON.stringify(o);alert("Chyba p≈ôi ulo≈æen√≠: "+A)}finally{d(!1)}},l=h=>{const v=`![${h.name}](${h.url})
`;j(f+v),S(!1)},y=h=>{const v=`<video src="${h.url}" controls style="width: 100%; margin: 1rem 0;" />
`;j(f+v),S(!1)},s=h=>{if(!k.coverImage&&h.type==="image"){x({...k,coverImage:h.url}),S(!1),alert("‚úì Tituln√≠ fotka nastavena");return}h.type==="image"?l(h):h.type==="video"&&y(h)},B=r.filter(h=>{var v;return h.title.toLowerCase().includes(b.toLowerCase())||((v=h.excerpt)==null?void 0:v.toLowerCase().includes(b.toLowerCase()))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 border flex justify-between items-center sticky top-0 z-20 shadow-sm",children:[e.jsxs("button",{onClick:()=>{z(null),x({title:"",excerpt:"",content:"",coverImage:"",date:new Date().toISOString().split("T")[0],author:"Jakub Minka",tags:[]}),j(""),P(!0)},className:"bg-[#007BFF] text-white px-8 py-3 text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all flex items-center gap-2",children:[e.jsx(Se,{size:16})," Nov√Ω ƒçl√°nek"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"HLEDAT...",value:b,onChange:h=>C(h.target.value),className:"pl-12 pr-6 py-3 border text-[10px] font-black w-64 uppercase text-black bg-white focus:border-[#007BFF] outline-none rounded"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(h=>e.jsxs(E.div,{layout:!0,className:"bg-white border border-gray-200 rounded overflow-hidden hover:border-[#007BFF] transition-all group",children:[h.coverImage&&e.jsx("div",{className:"w-full h-40 overflow-hidden bg-gray-100",children:e.jsx("img",{src:h.coverImage,alt:"",className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black uppercase text-gray-400 tracking-widest mb-2",children:new Date(h.date).toLocaleDateString("cs-CZ")}),e.jsx("h3",{className:"text-lg font-black uppercase tracking-tight line-clamp-2",children:h.title})]}),h.excerpt&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:h.excerpt}),h.tags&&h.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map(v=>e.jsx("span",{className:"text-[8px] bg-gray-100 px-2 py-1 rounded uppercase font-bold",children:v},v))}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>z(h.id)||P(!0),className:"flex-1 p-2 text-[10px] font-black uppercase border border-[#007BFF] text-[#007BFF] hover:bg-[#007BFF] hover:text-white transition-all rounded flex items-center justify-center gap-2",children:[e.jsx(ve,{size:14})," Upravit"]}),e.jsx("button",{onClick:()=>{confirm("Smazat artikel?")&&Xe.delete(h.id).then(()=>F())},className:"p-2 text-red-500 hover:bg-red-50 transition-all rounded",children:e.jsx(pe,{size:14})})]})]})]},h.id))}),B.length===0&&!D&&e.jsx("div",{className:"py-20 text-center text-gray-400",children:e.jsx("p",{className:"text-[12px] font-black uppercase tracking-widest",children:"≈Ω√°dn√© ƒçl√°nky"})}),e.jsx(ae,{children:D&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"bg-gray-50 border-b p-6 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-black uppercase tracking-widest",children:[u?"Upravit":"Nov√Ω"," ƒçl√°nek"]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-gray-200 rounded",children:e.jsx(ce,{size:24})})]}),e.jsx("form",{onSubmit:O,className:"p-8 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-black uppercase text-gray-600 tracking-widest mb-2",children:"N√°zev ƒçl√°nku"}),e.jsx("input",{type:"text",value:k.title||"",onChange:h=>x({...k,title:h.target.value}),placeholder:"Zadej n√°zev...",className:"w-full px-4 py-3 border border-gray-200 rounded text-lg font-black uppercase focus:border-[#007BFF] outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-black uppercase text-gray-600 tracking-widest mb-2",children:"Kr√°tk√© shrnut√≠ (SEO)"}),e.jsx("textarea",{value:k.excerpt||"",onChange:h=>x({...k,excerpt:h.target.value}),placeholder:"160 znak≈Ø - vid√≠ se v Google vyhled√°v√°n√≠...",rows:2,className:"w-full px-4 py-3 border border-gray-200 rounded resize-none focus:border-[#007BFF] outline-none"}),e.jsxs("p",{className:"text-[9px] text-gray-500 mt-1",children:[((_=k.excerpt)==null?void 0:_.length)||0," / 160 znak≈Ø"]})]}),e.jsx("div",{className:"border border-gray-200 rounded overflow-hidden",children:e.jsx(za,{content:f,coverImage:k.coverImage||"",title:k.title||"",onContentChange:j,onMediaClick:()=>S(!0)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-black uppercase text-gray-600 tracking-widest mb-2",children:"Tituln√≠ foto"}),e.jsx("div",{className:"aspect-video bg-gray-100 border-2 border-dashed border-gray-300 rounded flex items-center justify-center overflow-hidden relative group",children:k.coverImage?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:k.coverImage,alt:"",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>x({...k,coverImage:""}),className:"absolute top-2 right-2 p-2 bg-red-500 text-white opacity-0 group-hover:opacity-100 transition-opacity rounded",children:e.jsx(ce,{size:16})})]}):e.jsxs("button",{type:"button",onClick:()=>S(!0),className:"flex flex-col items-center gap-2 text-gray-500 hover:text-[#007BFF] transition-colors",children:[e.jsx(De,{size:24}),e.jsx("span",{className:"text-[8px] font-black uppercase",children:"Vybrat foto"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-black uppercase text-gray-600 tracking-widest mb-2",children:"Datum publikace"}),e.jsx("input",{type:"date",value:k.date||"",onChange:h=>x({...k,date:h.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded focus:border-[#007BFF] outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-black uppercase text-gray-600 tracking-widest mb-2",children:"Autor"}),e.jsx("input",{type:"text",value:k.author||"",onChange:h=>x({...k,author:h.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded focus:border-[#007BFF] outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-black uppercase text-gray-600 tracking-widest mb-2",children:"≈†t√≠tky"}),e.jsx("input",{type:"text",value:((U=k.tags)==null?void 0:U.join(", "))||"",onChange:h=>x({...k,tags:h.target.value.split(",").map(v=>v.trim()).filter(v=>v)}),placeholder:"tag1, tag2, tag3",className:"w-full px-4 py-2 border border-gray-200 rounded focus:border-[#007BFF] outline-none text-[10px]"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#007BFF] text-white py-4 text-[11px] font-black uppercase tracking-[0.3em] hover:bg-black transition-all disabled:opacity-50 rounded flex items-center justify-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:16,className:"animate-spin"}),"PUBLIKUJI..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Wt,{size:16}),"PUBLIKOVAT"]})})]})]})})]})}),e.jsx(Ut,{isOpen:I,onClose:()=>S(!1),onSelect:s,allowMultiple:!1,allowUpload:!0,showFolders:!0})]})},Sa=()=>{const[r,g]=n.useState([]),[D,P]=n.useState(null),[u,z]=n.useState(""),[b,C]=n.useState(new Set),c=async()=>{const f=localStorage.getItem("jakub_minka_partners");if(f){const F=JSON.parse(f);for(const O of F)await ie.collection("partners").save(O);localStorage.removeItem("jakub_minka_partners")}const j=await ie.collection("partners").getAll({force:!0});j&&j.length>0&&g(j.sort((F,O)=>F.name.localeCompare(O.name)))};n.useEffect(()=>{c()},[]);const d=async f=>{await ie.collection("partners").save(f),await c()},I=async f=>{await ie.collection("partners").delete(String(f)),await c()},S=f=>{const j=new Set(b);j.has(f)?j.delete(f):j.add(f),C(j)},N=async()=>{if(confirm("Smazat vybran√© partnery?")){for(const f of Array.from(b))await ie.collection("partners").delete(String(f));C(new Set),await c()}},$=async f=>{f.preventDefault(),u&&(await d({id:Math.random().toString(),name:u}),z(""))},k=async(f,j)=>{const F=r.find(O=>O.id===f);F&&(await d({...F,name:j}),P(null))},x=async f=>{confirm("Smazat tohoto partnera?")&&await I(f)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 border flex flex-wrap items-center justify-between gap-6",children:[e.jsxs("form",{onSubmit:$,className:"flex-grow max-w-xl flex gap-4",children:[e.jsx("input",{type:"text",value:u,onChange:f=>z(f.target.value),placeholder:"N√°zev partnera...",className:"flex-grow border-2 border-gray-100 p-4 text-sm font-bold"}),e.jsxs("button",{type:"submit",className:"bg-[#007BFF] text-white px-8 py-4 text-[10px] font-black uppercase tracking-widest",children:[e.jsx(Se,{size:16,className:"inline mr-2"})," P≈ôidat"]})]}),b.size>0&&e.jsxs("button",{onClick:N,className:"bg-red-600 text-white px-8 py-4 text-[10px] font-black uppercase tracking-widest",children:[e.jsx(pe,{size:16,className:"inline mr-2"})," Smazat vybran√© (",b.size,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map(f=>e.jsxs("div",{className:"bg-white p-6 border border-gray-100 flex items-center justify-between group hover:border-[#007BFF] transition-all relative",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>S(f.id),children:b.has(f.id)?e.jsx($e,{className:"text-[#007BFF]",size:18}):e.jsx(Ve,{className:"text-gray-200",size:18})}),D===f.id?e.jsx("input",{type:"text",defaultValue:f.name,autoFocus:!0,onBlur:j=>{k(f.id,j.target.value)},className:"font-bold border-b-2 border-[#007BFF] outline-none text-sm w-32 uppercase"}):e.jsx("span",{className:"text-sm font-black uppercase tracking-tight text-black",children:f.name})]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>P(f.id),className:"p-2 text-gray-300 hover:text-[#007BFF]",children:e.jsx(ve,{size:16})}),e.jsx("button",{onClick:()=>x(f.id),className:"p-2 text-gray-300 hover:text-red-500",children:e.jsx(pe,{size:16})})]})]},f.id))})]})},Ca=()=>{const[r,g]=n.useState([]),[D,P]=n.useState(""),[u,z]=n.useState(null),[b,C]=n.useState(!1),[c,d]=n.useState({}),I=async()=>{const x=await ie.collection("inquiries").getAll({force:!0});g(x.sort((f,j)=>new Date(j.date).getTime()-new Date(f.date).getTime()))};n.useEffect(()=>{I()},[]);const S=async x=>{await ie.collection("inquiries").update(x,{status:"read"})},N=async x=>{confirm("Smazat dotaz?")&&(await ie.collection("inquiries").delete(x),z(null),I())},$=async()=>{if(u)try{await ie.collection("inquiries").update(u.id,c),C(!1),z({...u,...c}),I(),alert("Dotaz byl upraven.")}catch(x){alert("Chyba p≈ôi ukl√°d√°n√≠: "+x)}},k=r.filter(x=>x.name.toLowerCase().includes(D.toLowerCase())||x.email.toLowerCase().includes(D.toLowerCase())||x.subject.toLowerCase().includes(D.toLowerCase()));return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 border flex justify-between items-center shadow-sm",children:[e.jsxs("div",{className:"relative flex-grow max-w-xl",children:[e.jsx(Pe,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"HLEDAT DOTAZ...",value:D,onChange:x=>P(x.target.value),className:"w-full border p-3 pl-12 text-[10px] font-black uppercase"})]}),e.jsxs("div",{className:"text-[10px] font-black uppercase text-gray-400",children:["Polo≈æek: ",k.length]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[e.jsxs("div",{className:"lg:col-span-5 bg-white border max-h-[70vh] overflow-y-auto",children:[k.map(x=>e.jsxs("div",{onClick:()=>{z(x),d(x),x.status==="new"&&S(x.id)},className:`p-6 border-b cursor-pointer transition-all hover:bg-gray-50 ${(u==null?void 0:u.id)===x.id?"bg-blue-50/50 border-l-4 border-l-[#007BFF]":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-[11px] font-black uppercase truncate text-black",children:x.name}),e.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase",children:new Date(x.date).toLocaleDateString()})]}),e.jsx("p",{className:"text-[10px] font-bold text-gray-500 uppercase truncate",children:x.subject}),x.status==="new"&&e.jsx("div",{className:"mt-2 w-2 h-2 bg-[#007BFF] rounded-full"})]},x.id)),k.length===0&&e.jsx("div",{className:"p-20 text-center text-gray-300 font-black uppercase text-[10px] tracking-widest",children:"≈Ω√°dn√© dotazy"})]}),e.jsx("div",{className:"lg:col-span-7",children:e.jsx(ae,{mode:"wait",children:u?e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white border p-10 space-y-8 min-h-[50vh] relative",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-8",children:[e.jsx("div",{className:"space-y-4 flex-grow pr-10",children:b?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black uppercase text-gray-400",children:"Jm√©no"}),e.jsx("input",{type:"text",value:c.name,onChange:x=>d({...c,name:x.target.value}),className:"border p-2 text-sm font-bold w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black uppercase text-gray-400",children:"Email"}),e.jsx("input",{type:"text",value:c.email,onChange:x=>d({...c,email:x.target.value}),className:"border p-2 text-sm font-bold w-full"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-black uppercase text-black",children:u.name}),e.jsx("p",{className:"text-xs font-black text-[#007BFF] uppercase",children:u.email})]})}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[b?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:$,className:"p-3 bg-green-600 text-white rounded-sm hover:bg-green-700 transition-colors",children:e.jsx(rt,{size:18})}),e.jsx("button",{onClick:()=>C(!1),className:"p-3 bg-gray-100 text-gray-400 rounded-sm hover:text-black transition-colors",children:e.jsx(ce,{size:18})})]}):e.jsx("button",{onClick:()=>C(!0),className:"p-3 bg-gray-50 text-gray-400 hover:text-black rounded-sm transition-colors",children:e.jsx(ve,{size:18})}),e.jsx("button",{onClick:()=>N(u.id),className:"p-3 bg-red-50 text-red-600 hover:bg-red-600 hover:text-white rounded-sm transition-all",children:e.jsx(pe,{size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] font-black uppercase text-gray-400",children:"Zpr√°va"}),b?e.jsx("textarea",{value:c.message,onChange:x=>d({...c,message:x.target.value}),className:"w-full border p-6 h-64 text-sm font-medium outline-none focus:border-[#007BFF]"}):e.jsx("div",{className:"bg-gray-50 p-8 border text-sm leading-relaxed font-medium whitespace-pre-wrap",children:u.message})]}),e.jsxs("div",{className:"pt-8 flex justify-between items-center text-[9px] font-black text-gray-300 uppercase tracking-widest",children:[e.jsxs("span",{children:["ID: ",u.id]}),e.jsxs("span",{children:["Datum: ",new Date(u.date).toLocaleString()]})]})]},u.id):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-gray-50 border border-dashed p-20 text-center",children:[e.jsx(Pt,{size:48,className:"text-gray-200 mb-6"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-gray-400 tracking-[0.2em]",children:"Vyberte dotaz pro zobrazen√≠ detailu"})]})})})]})]})},Ia=()=>{var y;const[r,g]=n.useState({homeHeader:"",portfolioHeader:"",contactHeader:"",blogHeader:"",specializationHeaders:{},homeHeroTitle:"VIZU√ÅLN√ç P≈ò√çBƒöHY, KTER√â PROD√ÅVAJ√ç",homeHeroSubtitle:"FOTOGRAF & KAMERAMAN",homeAboutTitle:"O MNƒö",homeAboutText:"",profilePic:"",specificationsTitle:"SPECIALIZACE",specificationsSubtitle:"CO PRO V√ÅS MOHU UDƒöLAT",contactTitle:"KONTAKT",contactSubtitle:"POJƒéME TVO≈òIT",bio:"",ico:"",dic:"",address:"",phone:"",email:"",footerDescription:"",doc1Name:"Ochrana soukrom√≠",doc1Url:"#",doc2Name:"Podm√≠nky spolupr√°ce",doc2Url:"#",backstage:[],instagramUrl:"",facebookUrl:"",youtubeUrl:"",linkedinUrl:"",pricingTitle:"CEN√çK SLU≈ΩEB",pricingSubtitle:"INVESTICE DO VIZU√ÅLU",price1Title:"FOTO PRODUKCE",price1Value:"od 5.000 Kƒç",price1Desc:"",price2Title:"VIDEO PRODUKCE",price2Value:"od 15.000 Kƒç",price2Desc:"",pricingCta:"POPTAT PROJEKT",privacyContent:"",termsContent:""}),[D,P]=n.useState("home"),[u,z]=n.useState(!1),[b,C]=n.useState(null),[c,d]=n.useState([]),[I,S]=n.useState(!1),N={homeAbout:n.useRef(null),price1:n.useRef(null),price2:n.useRef(null),privacy:n.useRef(null),terms:n.useRef(null),footerDesc:n.useRef(null)},$=async()=>{const s=await ie.doc("web_settings").get();s&&(g(_=>({..._,...s})),setTimeout(()=>{N.homeAbout.current&&(N.homeAbout.current.innerHTML=s.homeAboutText||""),N.price1.current&&(N.price1.current.innerHTML=s.price1Desc||""),N.price2.current&&(N.price2.current.innerHTML=s.price2Desc||""),N.privacy.current&&(N.privacy.current.innerHTML=s.privacyContent||""),N.terms.current&&(N.terms.current.innerHTML=s.termsContent||""),N.footerDesc.current&&(N.footerDesc.current.innerHTML=s.footerDescription||"")},200));const B=await X.getAll({force:!0});d(B)};n.useEffect(()=>{$()},[]);const k=async()=>{var B,_,U,h,v,o;S(!0);const s={...r,homeAboutText:((B=N.homeAbout.current)==null?void 0:B.innerHTML)||"",price1Desc:((_=N.price1.current)==null?void 0:_.innerHTML)||"",price2Desc:((U=N.price2.current)==null?void 0:U.innerHTML)||"",privacyContent:((h=N.privacy.current)==null?void 0:h.innerHTML)||"",termsContent:((v=N.terms.current)==null?void 0:v.innerHTML)||"",footerDescription:((o=N.footerDesc.current)==null?void 0:o.innerHTML)||""};await ie.doc("web_settings").set(s),S(!1),alert("V≈°echny zmƒõny byly publikov√°ny!")},x=(s,B)=>{document.execCommand(s,!1,B)},f=(s,B=!1)=>{C({key:s,isSpec:B}),z(!0)},j=s=>{if(b){if(b.key==="backstage-add"){g(B=>({...B,backstage:[...B.backstage||[],s]})),z(!1);return}b.isSpec?g(B=>({...B,specializationHeaders:{...B.specializationHeaders,[b.key]:s}})):g(B=>({...B,[b.key]:s})),z(!1)}},F="w-full bg-gray-50 text-black border-2 border-gray-100 p-5 font-black uppercase text-xs tracking-widest focus:border-[#007BFF] outline-none transition-all placeholder:text-gray-300",O=()=>e.jsxs("div",{className:"bg-gray-100 border-b p-2 flex gap-1 flex-wrap sticky top-0 z-20",children:[e.jsx("button",{type:"button",onClick:()=>x("bold"),className:"p-2 hover:bg-white rounded transition-colors",title:"Tuƒçn√©",children:e.jsx(Tt,{size:16})}),e.jsx("button",{type:"button",onClick:()=>x("italic"),className:"p-2 hover:bg-white rounded transition-colors",title:"Kurz√≠va",children:e.jsx(Mt,{size:16})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{type:"button",onClick:()=>x("formatBlock","H3"),className:"px-3 py-1 hover:bg-white rounded font-black text-[10px]",children:"H3"}),e.jsx("button",{type:"button",onClick:()=>x("insertUnorderedList"),className:"p-2 hover:bg-white rounded transition-colors",title:"Seznam",children:e.jsx(We,{size:16})})]}),l=({title:s,icon:B})=>e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-10 h-10 bg-[#007BFF]/10 text-[#007BFF] flex items-center justify-center rounded-sm",children:e.jsx(B,{size:20})}),e.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.3em]",children:s})]});return e.jsxs("div",{className:"space-y-12 pb-32",children:[e.jsx("div",{className:"flex bg-white border p-1 sticky top-0 z-[100] shadow-xl overflow-x-auto no-scrollbar",children:[{id:"seo",label:"SEO",icon:Pe},{id:"home",label:"√övodn√≠ str√°nka",icon:Qt},{id:"portfolio",label:"Portfolio",icon:jt},{id:"specs",label:"Specializace",icon:Ee},{id:"contact",label:"Kontakt & Bio",icon:vt},{id:"backstage",label:"Jak Pracuji",icon:Ee},{id:"footer",label:"Cen√≠k & Patiƒçka",icon:kt},{id:"legal",label:"Dokumenty",icon:Je}].map(s=>e.jsxs("button",{onClick:()=>P(s.id),className:`flex-1 min-w-[150px] py-5 px-4 flex items-center justify-center gap-3 text-[10px] font-black uppercase tracking-widest transition-all ${D===s.id?"bg-[#007BFF] text-white shadow-lg":"text-gray-400 hover:text-black hover:bg-gray-50"}`,children:[e.jsx(s.icon,{size:16})," ",s.label]},s.id))}),e.jsx(ae,{mode:"wait",children:e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white p-10 lg:p-16 border shadow-sm space-y-20 max-w-6xl mx-auto",children:[D==="seo"&&e.jsx("div",{className:"space-y-20",children:e.jsxs("section",{children:[e.jsx(l,{title:"Glob√°ln√≠ SEO nastaven√≠",icon:Pe}),e.jsxs("div",{className:"space-y-8 bg-blue-50/30 p-8 border border-blue-100 rounded-sm",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-6 leading-relaxed",children:[e.jsx("strong",{className:"text-black",children:"SEO (Search Engine Optimization)"})," pom√°h√° va≈°im str√°nk√°m um√≠stit se v√Ω≈°e ve vyhled√°v√°n√≠ Google. Vypl≈àte n√°sleduj√≠c√≠ pole s relevantn√≠mi informacemi."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase text-gray-400",children:["N√°zev webu (Site Title)",e.jsx("span",{className:"text-[#007BFF] ml-2",children:"üìä D≈Øle≈æit√© pro Google"})]}),e.jsx("input",{type:"text",value:r.siteTitle||"",onChange:s=>g({...r,siteTitle:s.target.value}),className:F,placeholder:"nap≈ô. Jakub Minka - Profesion√°ln√≠ Fotograf & Kameraman Praha",maxLength:60}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(r.siteTitle||"").length,"/60 znak≈Ø ‚Ä¢ Zobrazuje se v z√°lo≈æce prohl√≠≈æeƒçe a ve v√Ωsledc√≠ch vyhled√°v√°n√≠"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase text-gray-400",children:["Popis webu (Meta Description)",e.jsx("span",{className:"text-[#007BFF] ml-2",children:"üìä D≈Øle≈æit√© pro Google"})]}),e.jsx("textarea",{value:r.siteDescription||"",onChange:s=>g({...r,siteDescription:s.target.value}),className:`${F} h-24 resize-none`,placeholder:"nap≈ô. Profesion√°ln√≠ fotografie a video produkce pro firmy. Komerƒçn√≠ tvorba, architektura, pr≈Ømysl. +420 XXX XXX XXX",maxLength:160}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(r.siteDescription||"").length,"/160 znak≈Ø ‚Ä¢ Zobrazuje se pod n√°zvem ve v√Ωsledc√≠ch Google"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase text-gray-400",children:["Kl√≠ƒçov√° slova (Keywords)",e.jsx("span",{className:"text-gray-400 ml-2",children:"üí° M√©nƒõ d≈Øle≈æit√©, ale u≈æiteƒçn√©"})]}),e.jsx("input",{type:"text",value:r.siteKeywords||"",onChange:s=>g({...r,siteKeywords:s.target.value}),className:F,placeholder:"nap≈ô. fotograf praha, komerƒçn√≠ fotografie, firemn√≠ video, pr≈Ømyslov√° fotografie"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Oddƒõlujte ƒç√°rkami ‚Ä¢ Pou≈æ√≠vejte specifick√© fr√°ze kter√© lid√© hledaj√≠"})]})]}),e.jsxs("div",{className:"mt-12 p-6 bg-yellow-50 border border-yellow-200 rounded-sm",children:[e.jsxs("h4",{className:"font-black uppercase text-xs mb-3 flex items-center gap-2",children:[e.jsx(Nt,{size:16})," SEO Tips pro lep≈°√≠ um√≠stƒõn√≠"]}),e.jsxs("ul",{className:"text-sm space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"})," ",e.jsx("span",{children:"Pou≈æ√≠vejte konkr√©tn√≠ lokaci (Praha, Brno...)"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"})," ",e.jsx("span",{children:"Zahr≈àte va≈°i specializaci (komerƒçn√≠, pr≈Ømyslov√°...)"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"})," ",e.jsx("span",{children:"Ka≈æd√° str√°nka (blog, specializace) m√° vlastn√≠ SEO nastaven√≠"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"})," ",e.jsx("span",{children:"Obr√°zky pojmenov√°vejte smysluplnƒõ (ne IMG_1234.jpg)"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"})," ",e.jsx("span",{children:"Vypl≈àte ALT text u v≈°ech obr√°zk≈Ø v Media Gallery"})]})]})]})]})}),D==="home"&&e.jsxs("div",{className:"space-y-20",children:[e.jsxs("section",{children:[e.jsx(l,{title:"Hero Sekce (Z√°hlav√≠)",icon:Yt}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Hlavn√≠ nadpis"}),e.jsx("input",{type:"text",value:r.homeHeroTitle,onChange:s=>g({...r,homeHeroTitle:s.target.value}),className:`${F} text-2xl`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Podnadpis / Profese"}),e.jsx("input",{type:"text",value:r.homeHeroSubtitle,onChange:s=>g({...r,homeHeroSubtitle:s.target.value}),className:F})]}),e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Pozad√≠ √∫vodn√≠ sekce (Obr√°zek)"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-16 bg-gray-100 border overflow-hidden shrink-0",children:e.jsx("img",{src:r.homeHeader,className:"w-full h-full object-cover grayscale"})}),e.jsx("input",{type:"text",value:r.homeHeader,onChange:s=>g({...r,homeHeader:s.target.value}),className:F,placeholder:"URL obr√°zku..."}),e.jsx("button",{onClick:()=>f("homeHeader"),className:"bg-black text-white px-8 shrink-0 hover:bg-[#007BFF] transition-all",children:e.jsx(De,{size:20})})]})]})]})]}),e.jsxs("section",{className:"pt-20 border-t",children:[e.jsx(l,{title:"Sekce O mnƒõ",icon:vt}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Portr√©tn√≠ foto"}),e.jsxs("div",{className:"aspect-[3/4] bg-gray-50 border overflow-hidden relative group",children:[e.jsx("img",{src:r.profilePic,className:"w-full h-full object-cover grayscale"}),e.jsx("button",{onClick:()=>f("profilePic"),className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white transition-all",children:e.jsx(Se,{size:32})})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Nadpis bloku"}),e.jsx("input",{type:"text",value:r.homeAboutTitle,onChange:s=>g({...r,homeAboutTitle:s.target.value}),className:`${F} text-xl`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Textov√Ω obsah (WYSIWYG)"}),e.jsxs("div",{className:"border-2 border-gray-100 rounded-sm overflow-hidden",children:[e.jsx(O,{}),e.jsx("div",{ref:N.homeAbout,contentEditable:!0,className:"min-h-[350px] p-10 outline-none prose prose-lg max-w-none text-black bg-white font-medium leading-relaxed"})]})]})]})]})]})]}),D==="portfolio"&&e.jsx("div",{className:"space-y-16",children:e.jsxs("section",{children:[e.jsx(l,{title:"Z√°hlav√≠ Portfolia",icon:jt}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"aspect-[21/9] bg-gray-50 border relative overflow-hidden group",children:[e.jsx("img",{src:r.portfolioHeader,className:"w-full h-full object-cover grayscale"}),e.jsx("button",{onClick:()=>f("portfolioHeader"),className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white font-black text-[10px] tracking-widest uppercase transition-all",children:"Zmƒõnit obr√°zek z√°hlav√≠"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("input",{type:"text",value:r.portfolioHeader,onChange:s=>g({...r,portfolioHeader:s.target.value}),className:F,placeholder:"URL..."})})]})]})}),D==="specs"&&e.jsxs("div",{className:"space-y-20",children:[e.jsxs("section",{children:[e.jsx(l,{title:"Z√°hlav√≠ Specializac√≠",icon:Ee}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Nadpis"}),e.jsx("input",{type:"text",value:r.specificationsTitle,onChange:s=>g({...r,specificationsTitle:s.target.value}),className:F})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Podnadpis"}),e.jsx("input",{type:"text",value:r.specificationsSubtitle,onChange:s=>g({...r,specificationsSubtitle:s.target.value}),className:F})]})]})]}),e.jsxs("section",{className:"pt-20 border-t",children:[e.jsx(l,{title:"Vlastn√≠ obr√°zky pro jednotliv√© kategorie",icon:Se}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6",children:ze.map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"aspect-square bg-gray-50 border relative group overflow-hidden rounded-sm",children:[e.jsx("img",{src:r.specializationHeaders[s.id]||s.image,className:"w-full h-full object-cover grayscale"}),e.jsx("button",{onClick:()=>f(s.id,!0),className:"absolute inset-0 bg-[#007BFF]/80 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white transition-all",children:e.jsx(De,{size:20})})]}),e.jsx("p",{className:"text-[8px] font-black uppercase text-center text-gray-400 truncate",children:s.name})]},s.id))})]})]}),D==="contact"&&e.jsxs("div",{className:"space-y-20",children:[e.jsxs("section",{children:[e.jsx(l,{title:"Kontaktn√≠ informace",icon:Xt}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400",children:"Email"}),e.jsx("input",{type:"text",value:r.email,onChange:s=>g({...r,email:s.target.value}),className:F})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400",children:"Telefon"}),e.jsx("input",{type:"text",value:r.phone,onChange:s=>g({...r,phone:s.target.value}),className:F})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400",children:"Adresa / Mƒõsto"}),e.jsx("input",{type:"text",value:r.address,onChange:s=>g({...r,address:s.target.value}),className:F})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400",children:"IƒåO"}),e.jsx("input",{type:"text",value:r.ico,onChange:s=>g({...r,ico:s.target.value}),className:F})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400",children:"DIƒå"}),e.jsx("input",{type:"text",value:r.dic,onChange:s=>g({...r,dic:s.target.value}),className:F})]})]})]}),e.jsxs("section",{className:"pt-20 border-t",children:[e.jsx(l,{title:"Kr√°tk√© BIO (Text pod portr√©tem)",icon:wt}),e.jsx("textarea",{value:r.bio,onChange:s=>g({...r,bio:s.target.value}),className:`${F} h-40 resize-none normal-case font-medium text-sm leading-relaxed`})]}),e.jsxs("section",{className:"pt-20 border-t",children:[e.jsx(l,{title:"Soci√°ln√≠ s√≠tƒõ",icon:Et}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex gap-4 items-center bg-gray-50 p-4 border",children:[e.jsx(ea,{className:"text-[#E1306C]"}),e.jsx("input",{type:"text",value:r.instagramUrl,onChange:s=>g({...r,instagramUrl:s.target.value}),className:"bg-transparent text-xs font-bold flex-grow outline-none",placeholder:"Instagram URL"})]}),e.jsxs("div",{className:"flex gap-4 items-center bg-gray-50 p-4 border",children:[e.jsx(ta,{className:"text-[#1877F2]"}),e.jsx("input",{type:"text",value:r.facebookUrl,onChange:s=>g({...r,facebookUrl:s.target.value}),className:"bg-transparent text-xs font-bold flex-grow outline-none",placeholder:"Facebook URL"})]}),e.jsxs("div",{className:"flex gap-4 items-center bg-gray-50 p-4 border",children:[e.jsx(aa,{className:"text-[#FF0000]"}),e.jsx("input",{type:"text",value:r.youtubeUrl,onChange:s=>g({...r,youtubeUrl:s.target.value}),className:"bg-transparent text-xs font-bold flex-grow outline-none",placeholder:"Youtube URL"})]}),e.jsxs("div",{className:"flex gap-4 items-center bg-gray-50 p-4 border",children:[e.jsx(sa,{className:"text-[#0077B5]"}),e.jsx("input",{type:"text",value:r.linkedinUrl,onChange:s=>g({...r,linkedinUrl:s.target.value}),className:"bg-transparent text-xs font-bold flex-grow outline-none",placeholder:"Linkedin URL"})]})]})]})]}),D==="backstage"&&e.jsx("div",{className:"space-y-20",children:e.jsxs("section",{children:[e.jsx(l,{title:"Backstage Galerie - Jak Pracuji",icon:Ee}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 p-6 rounded",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Nt,{className:"text-blue-600 shrink-0 mt-1",size:20}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-black uppercase text-blue-900 tracking-wider",children:"Informace o sekci"}),e.jsxs("p",{className:"text-xs text-blue-700 leading-relaxed",children:["Zde m≈Ø≈æete spravovat fotky pro str√°nku ",e.jsx("strong",{children:'"Jak Pracuji"'})," (/jak-pracuji). Tyto obr√°zky zobrazuj√≠ z√°kulis√≠ va≈°√≠ tvorby a proces pr√°ce."]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-6",children:[e.jsxs("p",{className:"text-[9px] font-black uppercase tracking-widest text-gray-400",children:["Poƒçet fotek v galerii: ",((y=r.backstage)==null?void 0:y.length)||0]}),e.jsxs("button",{onClick:()=>{C({key:"backstage-add"}),z(!0)},className:"bg-[#007BFF] text-white px-8 py-4 text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all flex items-center gap-3",children:[e.jsx(Se,{size:16})," P≈ôidat fotku"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 pt-6",children:[(r.backstage||[]).map((s,B)=>e.jsxs("div",{className:"relative aspect-square bg-gray-100 border group overflow-hidden",children:[e.jsx("img",{src:s,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all",alt:`Backstage ${B+1}`}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center",children:e.jsx("button",{onClick:()=>{var U;const _=(U=r.backstage)==null?void 0:U.filter((h,v)=>v!==B);g({...r,backstage:_})},className:"bg-red-500 text-white p-3 rounded-sm hover:bg-red-600 transition-all",children:e.jsx(ce,{size:20})})}),e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-[8px] font-black px-2 py-1 rounded",children:["#",B+1]})]},B)),(!r.backstage||r.backstage.length===0)&&e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx(De,{size:48,className:"mb-4 opacity-30"}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"Zat√≠m ≈æ√°dn√© fotky"}),e.jsx("p",{className:"text-[10px] mt-2",children:'Kliknƒõte na tlaƒç√≠tko "P≈ôidat fotku" v√Ω≈°e'})]})]})]})]})}),D==="footer"&&e.jsxs("div",{className:"space-y-20",children:[e.jsxs("section",{children:[e.jsx(l,{title:"Cen√≠k v √∫vodu webu",icon:kt}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"space-y-6 bg-gray-50 p-8 border",children:[e.jsx("input",{type:"text",value:r.price1Title,onChange:s=>g({...r,price1Title:s.target.value}),className:F,placeholder:"N√°zev bal√≠ƒçku 1"}),e.jsx("input",{type:"text",value:r.price1Value,onChange:s=>g({...r,price1Value:s.target.value}),className:F,placeholder:"Cena bal√≠ƒçku 1"}),e.jsxs("div",{className:"bg-white border-2 border-gray-100 overflow-hidden",children:[e.jsx(O,{}),e.jsx("div",{ref:N.price1,contentEditable:!0,className:"min-h-[150px] p-6 outline-none text-xs font-bold uppercase tracking-widest text-gray-500"})]})]}),e.jsxs("div",{className:"space-y-6 bg-gray-50 p-8 border",children:[e.jsx("input",{type:"text",value:r.price2Title,onChange:s=>g({...r,price2Title:s.target.value}),className:F,placeholder:"N√°zev bal√≠ƒçku 2"}),e.jsx("input",{type:"text",value:r.price2Value,onChange:s=>g({...r,price2Value:s.target.value}),className:F,placeholder:"Cena bal√≠ƒçku 2"}),e.jsxs("div",{className:"bg-white border-2 border-gray-100 overflow-hidden",children:[e.jsx(O,{}),e.jsx("div",{ref:N.price2,contentEditable:!0,className:"min-h-[150px] p-6 outline-none text-xs font-bold uppercase tracking-widest text-gray-500"})]})]})]})]}),e.jsxs("section",{className:"pt-20 border-t",children:[e.jsx(l,{title:"Patiƒçka (Footer)",icon:wt}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Popis v patiƒçce (Pod logem)"}),e.jsxs("div",{className:"border-2 border-gray-100 overflow-hidden",children:[e.jsx(O,{}),e.jsx("div",{ref:N.footerDesc,contentEditable:!0,className:"min-h-[120px] p-6 outline-none text-sm font-medium leading-relaxed"})]})]})]})]}),D==="legal"&&e.jsxs("div",{className:"space-y-20",children:[e.jsxs("section",{children:[e.jsx(l,{title:"Ochrana soukrom√≠ (GDPR)",icon:ra}),e.jsxs("div",{className:"border-2 border-gray-100 overflow-hidden",children:[e.jsx(O,{}),e.jsx("div",{ref:N.privacy,contentEditable:!0,className:"min-h-[400px] p-12 outline-none prose prose-sm max-w-none bg-white text-black font-medium leading-relaxed"})]})]}),e.jsxs("section",{className:"pt-20 border-t",children:[e.jsx(l,{title:"Obchodn√≠ podm√≠nky",icon:Je}),e.jsxs("div",{className:"border-2 border-gray-100 overflow-hidden",children:[e.jsx(O,{}),e.jsx("div",{ref:N.terms,contentEditable:!0,className:"min-h-[400px] p-12 outline-none prose prose-sm max-w-none bg-white text-black font-medium leading-relaxed"})]})]})]})]},D)}),e.jsx("div",{className:"fixed bottom-10 right-10 z-[200] flex flex-col items-end gap-4",children:e.jsxs("button",{onClick:k,disabled:I,className:"bg-[#007BFF] text-white px-16 py-6 text-[11px] font-black uppercase tracking-[0.5em] shadow-[0_20px_50px_rgba(0,123,255,0.4)] hover:bg-black transition-all transform hover:-translate-y-1 active:scale-95 flex items-center gap-4",children:[I?e.jsx(Qe,{className:"animate-spin",size:18}):e.jsx(rt,{size:18}),"PUBLIKOVAT V≈†E"]})}),e.jsx(ae,{children:u&&e.jsx("div",{className:"fixed inset-0 z-[3000] bg-black/95 flex items-center justify-center p-12",onClick:()=>z(!1),children:e.jsxs("div",{className:"bg-white w-full max-w-6xl h-[85vh] flex flex-col rounded-sm overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"p-8 border-b flex justify-between items-center bg-gray-50 text-black",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-xl font-black uppercase tracking-widest",children:"Knihovna m√©di√≠"}),e.jsxs("p",{className:"text-[9px] font-black text-[#007BFF] uppercase tracking-[0.3em]",children:["Vyberte obr√°zek pro: ",b==null?void 0:b.key]})]}),e.jsx("button",{onClick:()=>z(!1),className:"text-black hover:text-red-500 transition-colors",children:e.jsx(ce,{size:32})})]}),e.jsx("div",{className:"p-10 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-6 overflow-y-auto bg-gray-50/30 flex-grow",children:c.filter(s=>s.type!=="folder").map(s=>e.jsxs("div",{onClick:()=>j(s.url),className:"relative aspect-square border-2 border-transparent hover:border-[#007BFF] transition-all p-1 cursor-pointer bg-white group shadow-sm",children:[e.jsx("img",{src:s.url,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx(Ot,{className:"text-[#007BFF]",size:32})})]},s.id))}),e.jsx("div",{className:"p-6 border-t bg-gray-50 flex justify-center",children:e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Kliknut√≠m na obr√°zek jej okam≈æitƒõ vyberete"})})]})})})]})},Ba=()=>{const[r,g]=n.useState(85),[D,P]=n.useState("idle"),[u,z]=n.useState(""),[b,C]=n.useState(""),[c,d]=n.useState(!1),[I,S]=n.useState("idle");n.useEffect(()=>{const x=localStorage.getItem("jakub_minka_compression_quality");x&&g(parseInt(x))},[]);const N=x=>{if(x.preventDefault(),S("idle"),u!==b){S("error");return}if(u.length<6){alert("Heslo mus√≠ m√≠t alespo≈à 6 znak≈Ø.");return}localStorage.setItem("jakub_minka_admin_password",u),S("success"),z(""),C(""),setTimeout(()=>S("idle"),4e3)},$=()=>{const x={projects:JSON.parse(localStorage.getItem("jakub_minka_projects")||"[]"),settings:JSON.parse(localStorage.getItem("jakub_minka_web_settings")||"{}"),reviews:JSON.parse(localStorage.getItem("jakub_minka_reviews")||"[]"),partners:JSON.parse(localStorage.getItem("jakub_minka_partners")||"[]")},f=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),j=URL.createObjectURL(f),F=document.createElement("a");F.href=j,F.download=`minka_backup_${new Date().toISOString().split("T")[0]}.json`,F.click()},k="w-full bg-white text-black border border-gray-200 p-4 text-sm font-bold focus:border-[#007BFF] outline-none transition-all placeholder:text-gray-300";return e.jsx("div",{className:"space-y-10",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[e.jsxs("section",{className:"bg-white p-10 border border-gray-100 shadow-sm space-y-8",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-[0.3em] flex items-center gap-3 text-black",children:[e.jsx(la,{size:20,className:"text-[#007BFF]"})," Zabezpeƒçen√≠ administrace"]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Nov√© heslo"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:u,onChange:x=>z(x.target.value),required:!0,className:k,placeholder:"Nov√© heslo (min. 6 znak≈Ø)"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:c?e.jsx(na,{size:18}):e.jsx(qe,{size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Potvrzen√≠ hesla"}),e.jsx("input",{type:c?"text":"password",value:b,onChange:x=>C(x.target.value),required:!0,className:k,placeholder:"Znovu zadejte heslo"})]}),I==="error"&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 text-[10px] font-black uppercase tracking-widest border border-red-100",children:[e.jsx(zt,{size:16})," Hesla se neshoduj√≠!"]}),I==="success"&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 text-green-600 text-[10px] font-black uppercase tracking-widest border border-green-100",children:[e.jsx(Ot,{size:16})," Heslo bylo √∫spƒõ≈°nƒõ zmƒõnƒõno!"]}),e.jsxs("button",{type:"submit",className:"w-full bg-black text-white py-4 text-[10px] font-black uppercase tracking-widest hover:bg-[#007BFF] transition-all shadow-lg flex items-center justify-center gap-3",children:["AKTUALIZOVAT P≈ò√çSTUP ",e.jsx(ia,{size:16})]})]})]}),e.jsxs("section",{className:"bg-white p-10 border border-gray-100 shadow-sm space-y-8",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-[0.3em] flex items-center gap-3 text-black",children:[e.jsx(oa,{size:20,className:"text-[#007BFF]"})," Spr√°va dat & Export"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:$,className:"flex flex-col items-center justify-center gap-4 p-8 border border-gray-100 hover:border-[#007BFF] hover:bg-blue-50/50 transition-all group",children:[e.jsx(ca,{size:24,className:"text-gray-300 group-hover:text-[#007BFF]"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-black",children:"St√°hnout z√°lohu webu"})]}),e.jsxs("div",{className:"p-8 border border-gray-100 bg-gray-50 flex flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest",children:"Datab√°ze: IndexedDB"}),e.jsx("p",{className:"text-[11px] font-black text-black mt-2",children:"AKTIVN√ç"})]})]})]}),e.jsxs("section",{className:"bg-white p-10 border border-gray-100 shadow-sm space-y-8 lg:col-span-2",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-[0.3em] flex items-center gap-3 text-black",children:[e.jsx(da,{size:20,className:"text-[#007BFF]"})," Glob√°ln√≠ optimalizace p≈ôi nahr√°v√°n√≠"]}),e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Kvalita komprese (JPEG)"}),e.jsxs("span",{className:"text-sm font-black text-[#007BFF]",children:[r,"%"]})]}),e.jsx("input",{type:"range",min:"50",max:"100",value:r,onChange:x=>g(parseInt(x.target.value)),className:"w-full h-2 bg-gray-100 rounded-lg appearance-none cursor-pointer accent-[#007BFF]"}),e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 bg-orange-50 p-4 border border-orange-100",children:[e.jsx(zt,{size:18}),e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Obr√°zky budou p≈ôi nahr√°v√°n√≠ automaticky zmen≈°eny na max 1920px (≈°√≠≈ôka/v√Ω≈°ka)."})]}),e.jsx("button",{onClick:()=>{localStorage.setItem("jakub_minka_compression_quality",r.toString()),alert("Kvalita ulo≈æena!")},className:"bg-gray-900 text-white px-12 py-4 text-[10px] font-black uppercase hover:bg-[#007BFF] transition-all",children:"ULO≈ΩIT KONFIGURACI"})]})]})]})})},Ua=()=>{var x,f;const r=At(),[g,D]=n.useState("dashboard"),[P,u]=n.useState(!0),[z,b]=n.useState(null),[C,c]=n.useState(null),[d,I]=n.useState(!1);n.useEffect(()=>{localStorage.getItem("admin_auth")||r("/");const F=async()=>{const l=localStorage.getItem("jakub_minka_stats");l&&b(JSON.parse(l));const y=await Vt();c(y),I(bt())};F();const O=setInterval(()=>I(bt()),2e3);return window.addEventListener("storage",F),()=>{window.removeEventListener("storage",F),clearInterval(O)}},[r]);const S=()=>{localStorage.removeItem("admin_auth"),r("/")},N=[{id:"dashboard",label:"P≈ôehled",icon:xa},{id:"files",label:"Soubory & M√©dia",icon:pa},{id:"projects",label:"Zak√°zky",icon:Ee},{id:"blog",label:"Blog",icon:ua},{id:"inquiries",label:"Dotazy",icon:Ft},{id:"web-settings",label:"Obsah webu",icon:Et},{id:"partners",label:"Partne≈ôi",icon:ma},{id:"reviews",label:"Recenze",icon:at},{id:"settings",label:"Syst√©m",icon:ga}],$=new Date().toISOString().split("T")[0],k=((x=z==null?void 0:z.dailyVisits)==null?void 0:x[$])||0;return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex font-sans text-gray-900",children:[e.jsx("aside",{className:`bg-black text-white transition-all duration-500 fixed h-full z-50 ${P?"w-72":"w-20"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-[#007BFF] rounded-sm shrink-0 shadow-lg shadow-[#007BFF]/20",children:e.jsx("span",{className:"font-black text-white",children:"M"})}),P&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-black uppercase tracking-widest leading-none",children:"JAKUB MINKA"}),e.jsx("span",{className:"text-[7px] text-gray-500 font-black uppercase tracking-[0.3em] mt-1.5",children:"ADMIN PANEL"})]})]}),e.jsx("div",{className:"p-4",children:e.jsxs($t,{to:"/",className:"w-full flex items-center gap-4 p-4 rounded-sm transition-all bg-white/5 hover:bg-[#007BFF] text-white/60 hover:text-white group border border-white/5 mb-4",children:[e.jsx(Ze,{size:20,strokeWidth:2.5}),P&&e.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:"Prohl√≠≈æet web"})]})}),e.jsx("nav",{className:"flex-grow p-4 space-y-2 overflow-y-auto custom-scrollbar",children:N.map(j=>e.jsxs("button",{onClick:()=>D(j.id),className:`w-full flex items-center gap-4 p-4 rounded-sm transition-all group ${g===j.id?"bg-[#007BFF] text-white shadow-lg shadow-[#007BFF]/20":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(j.icon,{size:20,strokeWidth:2.5}),P&&e.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:j.label})]},j.id))}),e.jsx("div",{className:"p-4 border-t border-white/5",children:e.jsxs("button",{onClick:S,className:"w-full flex items-center gap-4 p-4 rounded-sm text-red-400 hover:text-red-300 transition-all",children:[e.jsx(ha,{size:20}),P&&e.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:"Odhl√°sit se"})]})})]})}),e.jsxs("main",{className:`flex-grow transition-all duration-500 ${P?"pl-72":"pl-20"}`,children:[e.jsx(ae,{children:C===!1&&e.jsxs(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-amber-500 text-white px-10 py-3 flex items-center justify-between overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ba,{size:18}),e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest",children:["Pozor: Supabase nen√≠ aktivn√≠. Aplikace bƒõ≈æ√≠ v ",e.jsx("span",{className:"underline",children:"offline re≈æimu"})," (LocalStorage)."]})]}),e.jsxs("a",{href:"https://supabase.com/dashboard",target:"_blank",className:"text-[9px] font-black uppercase tracking-widest bg-black/20 px-4 py-1.5 hover:bg-black/40 transition-all flex items-center gap-2",children:["Aktivovat v Supabase ",e.jsx(Ze,{size:12})]})]})}),e.jsxs("header",{className:"h-20 bg-white border-b border-gray-100 flex items-center justify-between px-10 sticky top-0 z-40",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>u(!P),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",children:e.jsx(Oe,{className:`transition-transform duration-500 ${P?"rotate-180":""}`})}),e.jsx("h1",{className:"text-xs font-black uppercase tracking-[0.4em] text-gray-400 ml-4",children:(f=N.find(j=>j.id===g))==null?void 0:f.label})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 bg-gray-50 rounded-full border border-gray-100",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.6)]"}`}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-gray-500",children:C?"Cloud Synchronizov√°n":"Lok√°ln√≠ Re≈æim"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 bg-[#007BFF] rounded-full flex items-center justify-center text-white font-black text-xs shadow-md",children:"JM"}),e.jsxs("div",{className:"hidden lg:block text-left",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"Jakub Minka"}),e.jsx("p",{className:"text-[8px] font-bold text-gray-400 uppercase tracking-widest mt-1",children:"Super Admin"})]})]})]})]}),d&&e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mx-10 mt-6 p-6 bg-yellow-50 border-2 border-yellow-400 rounded-sm flex items-start gap-4",children:[e.jsx(St,{className:"text-yellow-600 shrink-0 mt-0.5",size:24}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-yellow-900 mb-2",children:"Supabase Limit Dosa≈æen"}),e.jsx("p",{className:"text-xs text-yellow-800 leading-relaxed mb-3",children:"Dosa≈æli jste free tier limit v Supabase. V≈°echny √∫pravy se ukl√°daj√≠ pouze lok√°lnƒõ v browseru. Po refreshi str√°nky se zmƒõny zobraz√≠, ale nebudou synchronizovan√© do cloud."}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("a",{href:"https://supabase.com/dashboard",target:"_blank",className:"text-[9px] font-black uppercase tracking-widest bg-yellow-600 text-white px-4 py-2 hover:bg-yellow-700 transition-all flex items-center gap-2",children:["Upgrade Supabase ",e.jsx(Ze,{size:12})]})})]})]}),e.jsx("div",{className:"p-10",children:e.jsx(ae,{mode:"wait",children:e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[g==="files"&&e.jsx(ka,{}),g==="reviews"&&e.jsx(Na,{}),g==="projects"&&e.jsx(wa,{}),g==="blog"&&e.jsx(Fa,{}),g==="partners"&&e.jsx(Sa,{}),g==="inquiries"&&e.jsx(Ca,{}),g==="web-settings"&&e.jsx(Ia,{}),g==="settings"&&e.jsx(Ba,{}),g==="dashboard"&&e.jsxs("div",{className:"space-y-10",children:[C===!1&&e.jsxs("div",{className:"bg-white p-8 border-l-4 border-l-amber-500 shadow-sm rounded-sm flex items-start gap-6",children:[e.jsx("div",{className:"p-4 bg-amber-50 text-amber-500 rounded-sm",children:e.jsx(St,{size:32})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest",children:"Backend vy≈æaduje nastaven√≠"}),e.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["V√°≈° Supabase k√≥d v ",e.jsx("code",{className:"bg-gray-100 px-1 rounded text-black",children:"src/supabaseClient.ts"})," nen√≠ spr√°vnƒõ nakonfigurov√°n. Nyn√≠ pou≈æ√≠v√°te LocalStorage ‚Äì data se ukl√°daj√≠ pouze ve va≈°em prohl√≠≈æeƒçi a nejsou sd√≠lena s ostatn√≠mi u≈æivateli."]}),e.jsx("div",{className:"flex gap-4 pt-2",children:e.jsx("button",{onClick:()=>D("settings"),className:"text-[9px] font-black uppercase tracking-widest text-[#007BFF] hover:underline",children:"Jak to opravit?"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"bg-white p-8 border border-gray-100 shadow-sm rounded-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 text-[#007BFF] rounded-sm",children:e.jsx(qe,{size:20})}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-green-500 flex items-center gap-1",children:[e.jsx(fa,{size:10})," Live"]})]}),e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Zobrazen√≠ dnes"}),e.jsx("p",{className:"text-4xl font-black",children:k})]}),e.jsxs("div",{className:"bg-white p-8 border border-gray-100 shadow-sm rounded-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-indigo-50 text-indigo-500 rounded-sm",children:e.jsx(ya,{size:20})})}),e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"N√°v≈°tƒõvy celkem"}),e.jsx("p",{className:"text-4xl font-black",children:(z==null?void 0:z.totalVisits)||0})]}),e.jsxs("div",{className:"bg-white p-8 border border-gray-100 shadow-sm rounded-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-amber-50 text-amber-500 rounded-sm",children:e.jsx(Ft,{size:20})})}),e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Nov√© dotazy"}),e.jsx("p",{className:"text-4xl font-black text-[#007BFF]",children:localStorage.getItem("jakub_minka_inquiries")?JSON.parse(localStorage.getItem("jakub_minka_inquiries")).filter(j=>j.status==="new").length:0})]}),e.jsxs("div",{className:"bg-white p-8 border border-gray-100 shadow-sm rounded-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-gray-50 text-gray-900 rounded-sm",children:e.jsx(Ee,{size:20})})}),e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Celkem projekt≈Ø"}),e.jsx("p",{className:"text-4xl font-black",children:localStorage.getItem("jakub_minka_projects")?JSON.parse(localStorage.getItem("jakub_minka_projects")).length:0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[e.jsxs("div",{className:"lg:col-span-7 bg-white p-10 border border-gray-100 shadow-sm rounded-sm space-y-8",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-[0.3em] flex items-center gap-3",children:[e.jsx(ja,{size:18,className:"text-[#007BFF]"})," Nejsledovanƒõj≈°√≠ specializace"]}),e.jsx("div",{className:"space-y-4",children:ze.filter(j=>!j.externalUrl).map(j=>{var y;const F=((y=z==null?void 0:z.categoryVisits)==null?void 0:y[j.id])||0,O=Math.max(...Object.values((z==null?void 0:z.categoryVisits)||{a:1})),l=O>0?F/O*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-gray-900",children:j.name}),e.jsxs("span",{className:"text-[10px] font-bold text-[#007BFF]",children:[F,"x"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-gray-50 rounded-full overflow-hidden",children:e.jsx(E.div,{initial:{width:0},animate:{width:`${l}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-[#007BFF]"})})]},j.id)})})]}),e.jsx("div",{className:"lg:col-span-5 space-y-8",children:e.jsxs("div",{className:"bg-black text-white p-10 rounded-sm space-y-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#007BFF] opacity-20 blur-3xl"}),e.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-[#007BFF]",children:"Data & Synchro"}),e.jsx("p",{className:"text-sm font-medium leading-relaxed opacity-70",children:C?"Va≈°e data jsou bezpeƒçnƒõ ulo≈æena v Supabase.":"Aplikace aktu√°lnƒõ ukl√°d√° data do LocalStorage va≈°eho prohl√≠≈æeƒçe. Pro trval√© ulo≈æen√≠ v cloudu nakonfigurujte Supabase."}),e.jsxs("button",{onClick:()=>D("settings"),className:"text-[9px] font-black uppercase tracking-widest flex items-center gap-2 hover:text-[#007BFF] transition-colors",children:[C?"Export dat":"Nastaven√≠ p≈ôipojen√≠"," ",e.jsx(Oe,{size:14})]})]})})]})]})]},g)})})]}),e.jsx("style",{children:".custom-scrollbar::-webkit-scrollbar { width: 4px; } .custom-scrollbar::-webkit-scrollbar-track { background: transparent; } .custom-scrollbar::-webkit-scrollbar-thumb { background: #007BFF; }"})]})};export{Ua as default};
